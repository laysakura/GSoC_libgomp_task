------------------------------------------------------------------------
r3641 | dreachem | 2011-06-04 16:25:15 +0900 (土, 04  6月 2011) | 4 lines

open64 merge r3610:3640. 

See the open64 commit log for more details.

------------------------------------------------------------------------
r3635 | dreachem | 2011-05-30 12:02:36 +0900 (月, 30  5月 2011) | 12 lines

Fixes some libopenmp inline function declarations

The following functions had a single declaration/definition, and were inline:

__ompc_task_exit_to
__omp_get_cpu_num
__omp_get_available_processors
__ompc_bind_pthread_to_cpu

If compiled with gcc > 4.3 and -O0 (e.g. when using BUILD_OPTIMIZE=DEBUG),
definitions are not emitted resulting in link-time errors when OpenMP programs
are compiled. I made the above declarations 'static inline' to fix this.
------------------------------------------------------------------------
r3634 | dreachem | 2011-05-30 05:11:00 +0900 (月, 30  5月 2011) | 1 line

Exit mfef95 when dumping help options
------------------------------------------------------------------------
r3633 | dreachem | 2011-05-30 05:10:56 +0900 (月, 30  5月 2011) | 11 lines

Remove some inline declarations in omp_rtl.h

If using gcc > 4.3, it used C99 inline rules. This caused some extern inline
functions declared in omp_rtl.h to be not defined.  But using -fgnu89-inline
breaks the build for older versions of gcc. Instead, I remove the inline
keyword for declaration of the following functions in omp_rtl.h:

__ompc_init_vp
__ompc_task_delete
__ompc_task_get
__ompc_task_switch
------------------------------------------------------------------------
r3632 | dreachem | 2011-05-30 05:10:52 +0900 (月, 30  5月 2011) | 4 lines

Removes installation of older header files

OpenUH used to install some OpenMP and whirl2c/whirl2f header files in the
install script, but these are no longer needed.
------------------------------------------------------------------------
r3612 | dreachem | 2011-05-20 07:21:43 +0900 (金, 20  5月 2011) | 5 lines

open64 merge r3590:3610. 

See the open64 commit log for more details.


------------------------------------------------------------------------
r3604 | dreachem | 2011-05-15 08:49:39 +0900 (日, 15  5月 2011) | 13 lines

Fix for loop condition in _ompc_barrier_wait

The problem was in checking the number of remaining tasks in
__ompc_barrier_wait routine.  num_tasks variable is always decremented when a
thread enters the barrier. If there is no tasks, num_tasks will become
negative and thread can go into an infinite loop.

Fix changes the operator "!=" into ">".

Also added callback handler to join event and the corresponding thread state
to complement the call to fork event that is already added.

Author: Besar
------------------------------------------------------------------------
r3603 | dreachem | 2011-05-15 08:49:34 +0900 (日, 15  5月 2011) | 8 lines

Some Makefile enhancements, and improvements to --show and --version display.

- adds a PREFIX variable to Makefile to change the installation path for make install
- additions to 'make help' display
- records configure arguments, displayed with --version
- improved -show, phase separated and backend phases after IPA shown as well

Note: requires a clean configure and make.
------------------------------------------------------------------------
r3602 | dreachem | 2011-05-15 08:49:29 +0900 (日, 15  5月 2011) | 9 lines

Adding support for nested parallelism.

authors: Deepak, Jim
- Applying nestedpar patch1 from Jim's changes.
- adding case for parallel begin in transform_parallel_block
- unset RID_map in driver (for nested MP regions)
- don't recurse into nested parallel region in Transform_Parallel_Block.

TODO: barrier directive in nested parallel reigon causes program to hang.
------------------------------------------------------------------------
r3601 | dreachem | 2011-05-15 08:49:24 +0900 (日, 15  5月 2011) | 1 line

modification to openuh features section in README
------------------------------------------------------------------------
r3600 | dreachem | 2011-05-15 08:49:20 +0900 (日, 15  5月 2011) | 1 line

adding some sections to README.openuh
------------------------------------------------------------------------
r3591 | dreachem | 2011-05-09 01:05:12 +0900 (月, 09  5月 2011) | 9 lines

open64 merge r3579:3590. 

Open64 commit 3590 addresses the issue encountered in targ_const.cxx during
the 3520:3576 open64 merge (see README.openuH).  I re-enabled the assertion
check. 

See the open64 commit log for more details.


------------------------------------------------------------------------
r3582 | dreachem | 2011-05-04 04:38:49 +0900 (水, 04  5月 2011) | 3 lines

open64 merge r3576:3579.


------------------------------------------------------------------------
r3581 | dreachem | 2011-05-02 11:25:16 +0900 (月, 02  5月 2011) | 1 line

fixes incorrect declaration for Get_Field_Type which caused undefined symbol runtime error
------------------------------------------------------------------------
r3580 | dreachem | 2011-05-02 03:28:45 +0900 (月, 02  5月 2011) | 17 lines

merge of -r3477:3556 of openmp3.0 branch.

This merge updates OpenUH with recent changes from the openmp3.0 branch.
Results from our validation suite show some issues with if and untied clause.

#Tested Directive           t       ct      ot      oct
omp_master_3                100     100     100     100 
omp_task                    100     100     100     100 
omp_task_if                 100     100     5       -   
omp_task_untied             100     0       100     0   
omp_task_private            100     100     100     100 
omp_task_firstprivate       100     100     100     100 
omp_taskwait                100     100     100     100 
omp_for_schedule_static_3   100     100     100     100 



------------------------------------------------------------------------
r3578 | dreachem | 2011-05-01 10:22:24 +0900 (日, 01  5月 2011) | 10 lines

open64 merge r3520:3567.  
 
Turned off some assertion checks in common/com/x8664/targ_const.cxx, because
they were causing the bootstrapped library build to fail with
--with-build-optimize=DEBUG. The same problem was observed for Open64 main
trunk, as of revision r3576.

Also, forgot to add omp_collector_util.c in previous commit. 


------------------------------------------------------------------------
r3577 | leihuang | 2011-05-01 07:57:30 +0900 (日, 01  5月 2011) | 3 lines

merge of open64 trunk (through r3520) into OpenUH branch.


------------------------------------------------------------------------
r3522 | leihuang | 2011-03-19 06:45:00 +0900 (土, 19  3月 2011) | 1 line

Adding note to README.
------------------------------------------------------------------------
r3324 | leihuang | 2010-08-28 13:19:05 +0900 (土, 28  8月 2010) | 1 line


------------------------------------------------------------------------
r2799 | oscarh | 2010-02-02 00:01:27 +0900 (火, 02  2月 2010) | 2 lines

Point to the right directory to build libepilog in Opterons

------------------------------------------------------------------------
r2798 | oscarh | 2010-02-01 23:58:44 +0900 (月, 01  2月 2010) | 2 lines

Instrumentation to work with latest TAU version.

------------------------------------------------------------------------
r2329 | leihuang | 2009-08-19 05:06:46 +0900 (水, 19  8月 2009) | 2 lines

Minor fixes of the collector.

------------------------------------------------------------------------
r2303 | leihuang | 2009-06-25 07:01:14 +0900 (木, 25  6月 2009) | 1 line

whirl2c bug of frame pointer
------------------------------------------------------------------------
r2226 | leihuang | 2009-04-02 04:05:53 +0900 (木, 02  4月 2009) | 1 line

fixed OpenMP whirl2c bug
------------------------------------------------------------------------
r2118 | oscarh | 2009-03-10 02:22:21 +0900 (火, 10  3月 2009) | 2 lines

Commented statement causing compilation errors.

------------------------------------------------------------------------
r2115 | oscarh | 2009-03-07 04:35:09 +0900 (土, 07  3月 2009) | 2 lines

APIs for the OpenMP runtime.

------------------------------------------------------------------------
r2097 | oscarh | 2009-02-05 16:51:20 +0900 (木, 05  2月 2009) | 3 lines

Changes for collector api. Passed alpha test and made it thread safe.


------------------------------------------------------------------------
r2092 | oscarh | 2009-02-03 11:05:12 +0900 (火, 03  2月 2009) | 2 lines

Collector API alpha implementation. Added a better C++ integration.

------------------------------------------------------------------------
r2091 | oscarh | 2009-02-03 07:25:32 +0900 (火, 03  2月 2009) | 2 lines

Modifications with a primary implementation of the collector API.

------------------------------------------------------------------------
r2090 | oscarh | 2009-02-03 04:51:02 +0900 (火, 03  2月 2009) | 2 lines

Corrections.

------------------------------------------------------------------------
r2089 | leihuang | 2009-01-30 10:40:59 +0900 (金, 30  1月 2009) | 2 lines

Removed header file.

------------------------------------------------------------------------
r2088 | leihuang | 2009-01-30 10:39:17 +0900 (金, 30  1月 2009) | 2 lines

Final fixes to avoid deadlocks. Oscar

------------------------------------------------------------------------
r2087 | leihuang | 2009-01-30 05:06:02 +0900 (金, 30  1月 2009) | 2 lines

Modifications to solve barrier bug.

------------------------------------------------------------------------
r2086 | leihuang | 2009-01-30 02:20:06 +0900 (金, 30  1月 2009) | 2 lines

Temporary fix for Opteron.

------------------------------------------------------------------------
r2085 | leihuang | 2009-01-29 09:38:08 +0900 (木, 29  1月 2009) | 2 lines

Header file needed.

------------------------------------------------------------------------
r2084 | leihuang | 2009-01-29 07:32:51 +0900 (木, 29  1月 2009) | 2 lines

More fixes in the OpenMP runtime library.

------------------------------------------------------------------------
r2083 | leihuang | 2009-01-25 11:23:40 +0900 (日, 25  1月 2009) | 2 lines

Array to store callbacks. Oscar 

------------------------------------------------------------------------
r2082 | leihuang | 2009-01-25 11:22:14 +0900 (日, 25  1月 2009) | 2 lines

Updates & changes to the makefile to use TAU when present. TAU_ROOT & PAPI_ROOT must be set.

------------------------------------------------------------------------
r2081 | leihuang | 2009-01-25 11:21:21 +0900 (日, 25  1月 2009) | 2 lines

Fixes to the collector states.

------------------------------------------------------------------------
r2080 | leihuang | 2009-01-25 11:17:48 +0900 (日, 25  1月 2009) | 2 lines

Capture the end master event.

------------------------------------------------------------------------
r2048 | leihuang | 2009-01-09 08:15:06 +0900 (金, 09  1月 2009) | 2 lines

Avoid nesting OpenMP functions.

------------------------------------------------------------------------
r1955 | leihuang | 2008-09-30 07:07:14 +0900 (火, 30  9月 2008) | 2 lines

Fixed real issue with the critical and states. Oscar

------------------------------------------------------------------------
r1954 | leihuang | 2008-09-30 00:15:15 +0900 (火, 30  9月 2008) | 3 lines

Forgot to remove one line of code that is causing some problems with thread ids. 
Oscar

------------------------------------------------------------------------
r1953 | leihuang | 2008-09-28 08:23:51 +0900 (日, 28  9月 2008) | 3 lines

Team for nested parallelism is defined inside ompc_fork() so that it is destroyed when fork finishes.
I was considering moving it to a global variable and reuse it but first needs to work with Jim's fixes. Oscar.

------------------------------------------------------------------------
r1952 | leihuang | 2008-09-28 07:56:30 +0900 (日, 28  9月 2008) | 2 lines

Installation script to install OpenMP Modules. The default installation directory will be $TOOLROOT/lib/f90modules.

------------------------------------------------------------------------
r1951 | leihuang | 2008-09-28 07:55:30 +0900 (日, 28  9月 2008) | 3 lines

Added this modules to make sure that OpenMP fortran modules work. Probably need to add source code and compile modules
instead of adding binaries. Oscar

------------------------------------------------------------------------
r1949 | leihuang | 2008-09-27 21:59:29 +0900 (土, 27  9月 2008) | 3 lines

Need to reimplement getting the thread id. Might have to use omp_get_thread_num although this invokes higher overheads.
But I have to test it more. Oscar

------------------------------------------------------------------------
r1948 | leihuang | 2008-09-27 21:56:07 +0900 (土, 27  9月 2008) | 2 lines

Fixed the lock issue, with OpenMP critical. Might need to rethink how to capture waiting state in Collector API. Oscar

------------------------------------------------------------------------
r1935 | leihuang | 2008-09-26 04:29:44 +0900 (金, 26  9月 2008) | 4 lines

Fixed the issue with gcc 4.1.1 and the atomic operation __sync_add_and_fetch().
Made it available until 4.1.2 with #ifdef OMP_USE_GCC_ATOMIC_BUILTINS


------------------------------------------------------------------------
r1926 | leihuang | 2008-09-20 05:18:13 +0900 (土, 20  9月 2008) | 2 lines

Removed tasks output results *minor change*

------------------------------------------------------------------------
r1925 | leihuang | 2008-09-20 05:16:57 +0900 (土, 20  9月 2008) | 1 line


------------------------------------------------------------------------
r1924 | leihuang | 2008-09-20 03:26:13 +0900 (土, 20  9月 2008) | 2 lines

Installation of header files for whirl2c.h and whirl2f.h

------------------------------------------------------------------------
r1923 | leihuang | 2008-09-20 03:21:46 +0900 (土, 20  9月 2008) | 2 lines

Fix for 4.x, thanks to Deepak! Oscar

------------------------------------------------------------------------
r1915 | leihuang | 2008-09-19 06:10:17 +0900 (金, 19  9月 2008) | 2 lines

Reverted some changes to comply with whirl2c openmp translation

------------------------------------------------------------------------
r1888 | leihuang | 2008-09-04 10:20:39 +0900 (木, 04  9月 2008) | 3 lines

Minor fix in the MPRUNTIME enumeration


------------------------------------------------------------------------
r1860 | leihuang | 2008-08-31 10:30:30 +0900 (日, 31  8月 2008) | 10 lines

Adding support for OpenMP tasks

The runtime library has been tested and is known to work with gcc 4.2.3.
gcc 3.3.3 has also been tested and is known to cause deadlock,
however this should not affect OpenMP programs using only OpenMP 2.5
constructs.

The gcc 3.3.3 frontend provides full support for OpenMP 3.0 tasks.


------------------------------------------------------------------------
r1829 | leihuang | 2008-08-26 13:44:49 +0900 (火, 26  8月 2008) | 1 line


------------------------------------------------------------------------
r1823 | leihuang | 2008-08-26 02:09:27 +0900 (火, 26  8月 2008) | 2 lines

Translation of the collector API

------------------------------------------------------------------------
r1822 | leihuang | 2008-08-26 02:08:55 +0900 (火, 26  8月 2008) | 2 lines

Modifications for the collector API

------------------------------------------------------------------------
r1821 | leihuang | 2008-08-26 01:51:01 +0900 (火, 26  8月 2008) | 2 lines

Accidentally committed wrong versions earlier. Reverting back.

------------------------------------------------------------------------
r1820 | leihuang | 2008-08-26 01:39:34 +0900 (火, 26  8月 2008) | 1 line

test
------------------------------------------------------------------------
r1819 | leihuang | 2008-08-26 01:37:47 +0900 (火, 26  8月 2008) | 1 line

test
------------------------------------------------------------------------
r1773 | leihuang | 2008-08-08 05:01:15 +0900 (金, 08  8月 2008) | 2 lines

Adding the header provided by the OpenMP ARB for the OpenMP Collector API

------------------------------------------------------------------------
r1772 | leihuang | 2008-08-08 04:40:28 +0900 (金, 08  8月 2008) | 2 lines

Change to differenciate a reduction from a critical section.

------------------------------------------------------------------------
r1771 | leihuang | 2008-08-08 04:39:02 +0900 (金, 08  8月 2008) | 1 line


------------------------------------------------------------------------
r1421 | leihuang | 2008-02-13 05:15:06 +0900 (水, 13  2月 2008) | 2 lines

Allow opt listings while in LNO phase.

------------------------------------------------------------------------
r1395 | leihuang | 2007-12-20 07:15:39 +0900 (木, 20 12月 2007) | 1 line

adding the OpenMP compliation flag in the HOWTO-INSTALL-OPEN64 file
------------------------------------------------------------------------
r1256 | leihuang | 2007-09-20 09:22:30 +0900 (木, 20  9月 2007) | 2 lines

Support for rand_ and srand_ in libfortran.a

------------------------------------------------------------------------
r1255 | leihuang | 2007-09-20 06:07:07 +0900 (木, 20  9月 2007) | 2 lines

Basically pointing the subversion from OpenUH branch if using OpenUH

------------------------------------------------------------------------
r1254 | leihuang | 2007-09-20 05:51:59 +0900 (木, 20  9月 2007) | 1 line

remove using gcc 3.x by default
------------------------------------------------------------------------
r1253 | leihuang | 2007-09-19 09:03:01 +0900 (水, 19  9月 2007) | 2 lines

Needs *TextEditor Class* fixing for GNU 4.x

------------------------------------------------------------------------
r1245 | leihuang | 2007-09-12 02:09:53 +0900 (水, 12  9月 2007) | 1 line

revert back to version 1240
------------------------------------------------------------------------
r1244 | leihuang | 2007-09-12 00:59:12 +0900 (水, 12  9月 2007) | 1 line

revert back to version 1240
------------------------------------------------------------------------
r1243 | leihuang | 2007-09-12 00:56:59 +0900 (水, 12  9月 2007) | 1 line

revert back to version 1240
------------------------------------------------------------------------
r1241 | leihuang | 2007-09-11 07:07:08 +0900 (火, 11  9月 2007) | 1 line

a few bug fixing in whirl2f
------------------------------------------------------------------------
r1240 | leihuang | 2007-09-11 07:04:41 +0900 (火, 11  9月 2007) | 1 line

a few bug fixing in whirl2f
------------------------------------------------------------------------
r1239 | liao | 2007-09-10 17:00:29 +0900 (月, 10  9月 2007) | 1 line

commit merged whirl2c
------------------------------------------------------------------------
r1231 | leihuang | 2007-08-22 01:07:54 +0900 (水, 22  8月 2007) | 2 lines

Modification so we can use OSP compiler

------------------------------------------------------------------------
r1226 | leihuang | 2007-08-14 03:24:54 +0900 (火, 14  8月 2007) | 5 lines

Bugs fix:
- turn on scalar reduction when -apocost flag is set on
- do not write XML file if not needed.


------------------------------------------------------------------------
r1221 | leihuang | 2007-08-08 23:50:47 +0900 (水, 08  8月 2007) | 3 lines

add flags for autoscope and apocost


------------------------------------------------------------------------
r1218 | leihuang | 2007-08-07 09:41:57 +0900 (火, 07  8月 2007) | 3 lines

add flag for autoscope and apocost


------------------------------------------------------------------------
r1217 | leihuang | 2007-08-07 09:41:36 +0900 (火, 07  8月 2007) | 3 lines

add flags for autoscope and apocost


------------------------------------------------------------------------
r1216 | leihuang | 2007-08-07 09:40:34 +0900 (火, 07  8月 2007) | 3 lines

merge to Open64 4.x for FOMPI


------------------------------------------------------------------------
r1215 | leihuang | 2007-08-07 05:43:39 +0900 (火, 07  8月 2007) | 3 lines

Merge from LNO 3.1 (UH version)


------------------------------------------------------------------------
r1195 | leihuang | 2007-07-25 07:47:40 +0900 (水, 25  7月 2007) | 1 line

use the previous gcc frontend for OpenMP
------------------------------------------------------------------------
r1191 | leihuang | 2007-07-23 05:46:28 +0900 (月, 23  7月 2007) | 2 lines

Changes to test new TAU interface and deal with scalability issues.

------------------------------------------------------------------------
r1183 | leihuang | 2007-07-17 01:20:33 +0900 (火, 17  7月 2007) | 2 lines

First patch for the compiler instrumentation

------------------------------------------------------------------------
r1178 | leihuang | 2007-07-16 04:37:18 +0900 (月, 16  7月 2007) | 2 lines

Corrected the issue of the -epilog flag.

------------------------------------------------------------------------
r1177 | leihuang | 2007-07-16 04:36:32 +0900 (月, 16  7月 2007) | 2 lines

Single Data Structure for regions.

------------------------------------------------------------------------
r1173 | leihuang | 2007-07-14 15:31:46 +0900 (土, 14  7月 2007) | 2 lines

single data structure test.

------------------------------------------------------------------------
r1170 | leihuang | 2007-07-13 23:56:22 +0900 (金, 13  7月 2007) | 2 lines

First integration of instrumentation/tools for OpenUH branch

------------------------------------------------------------------------
r1168 | leihuang | 2007-07-13 08:55:33 +0900 (金, 13  7月 2007) | 2 lines

Commit test.

------------------------------------------------------------------------
r1164 | liao | 2007-07-12 11:28:20 +0900 (木, 12  7月 2007) | 1 line

change opencc/CC/f90 to uhcc/CC/f90 to be compatible with previous OpenUH versions
------------------------------------------------------------------------
r1143 | liao | 2007-07-04 08:28:48 +0900 (水, 04  7月 2007) | 11 lines

enabled building & installing libopenmp.a under targia32_builtonia32
to support ia32 and -m32 of AMD64

changed #ifdef TARG_X8664 to #ifndef TARG_IA64 in omp_sys.h
 to avoid ia32 to use Itanium instrutions

fixed installation path for whirl2c/f_be




------------------------------------------------------------------------
r1140 | liao | 2007-07-03 10:42:26 +0900 (火, 03  7月 2007) | 86 lines

Merged some bug fixes of the OpenMP runtime library from OpenUH
liao@gomez:~/OpenUH4.1/osprey/libopenmp> svn diff
Index: omp_thread.c
===================================================================
--- omp_thread.c        (revision 1139)
+++ omp_thread.c        (working copy)
@@ -370,7 +370,8 @@
 
   /* determine number of threads to create*/
   threads_to_create = num_threads == 0 ? __omp_nthreads_var : num_threads;
-
+ /*keep it as nthreads-var suggested in spec. Liao*/
+  __omp_nthreads_var = threads_to_create;
   /* setup pthread attributes */
   pthread_attr_init(&__omp_pthread_attr);
   pthread_attr_setscope(&__omp_pthread_attr, PTHREAD_SCOPE_SYSTEM);
@@ -638,6 +639,8 @@
     current_u_thread = __ompc_get_current_u_thread();
     original_v_thread = current_u_thread->task;
 
+    //inherit the thread number from the 1st level. Liao
+    if (num_threads ==0 ) num_threads = __omp_level_1_team_size;
     temp_team.team_size = num_threads;
     temp_team.is_nested = 1;
     temp_team.team_level = original_v_thread->team->team_level + 1;
@@ -721,6 +724,8 @@
     current_u_thread = __ompc_get_current_u_thread();
     original_v_thread = current_u_thread->task;
 
+    //bug 361, get_local_thread_num() return garbage value, Liao
+    temp_v_thread.vthread_id = 0; 
     temp_v_thread.team_size = 1;
     temp_v_thread.single_count = 0;
     temp_v_thread.loop_count = 0;
Index: omp_thread.h
===================================================================
--- omp_thread.h        (revision 1139)
+++ omp_thread.h        (working copy)
@@ -65,10 +65,33 @@
 
 inline int __ompc_get_max_threads(void)
 {
+  /*Could be called in 1. sequential part or 2. parallel region
+
+  1.  for sequential part invoking: 
+    return the value of OMP_NUM_THREADS or
+                   number of available processors
+    cannot use the internal var because the RTL may not yet been initialized!!
+  2. for a parallel region: return the initialized internal var.
+    By Liao. 8/30/2006 bug 157
+  */
+        char *env_var_str;
+        int  env_var_val;
+
   if (__omp_rtl_initialized == 1)
     return __omp_nthreads_var;
-  else
-    return Get_SMP_CPU_num();
+  else {
+       env_var_str = getenv("OMP_NUM_THREADS");
+       if (env_var_str != NULL)
+          {
+              sscanf(env_var_str, "%d", &env_var_val);
+            Is_Valid(env_var_val > 0, ("OMP_NUM_THREAD should > 0"));
+            if (env_var_val > __omp_max_num_threads)
+                env_var_val = __omp_max_num_threads;
+            return env_var_val;
+           } 
+       else
+          return Get_SMP_CPU_num();
+  }
 }
 
 inline int __ompc_get_num_procs(void)
@@ -134,6 +157,8 @@
     while (uthread_next != NULL) {
       if (uthread_next->uthread_id == uthread_id) {
        uthread_temp->hash_next = uthread_next->hash_next;
+        // release the lock before returning!! bug 359 Liao
+        pthread_mutex_unlock(&__omp_hash_table_lock);
        return;
       } else {
        uthread_temp = uthread_next;



------------------------------------------------------------------------
r1139 | liao | 2007-07-03 05:07:46 +0900 (火, 03  7月 2007) | 1 line

install omp.h into /include/
------------------------------------------------------------------------
r1133 | liao | 2007-06-30 21:44:51 +0900 (土, 30  6月 2007) | 1 line

fix duplicated content
------------------------------------------------------------------------
r1120 | ributzka | 2007-06-22 15:54:37 +0900 (金, 22  6月 2007) | 1 line

Create new branch OpenUH from trunk.
------------------------------------------------------------------------
r1119 | zx | 2007-06-21 10:23:51 +0900 (木, 21  6月 2007) | 4 lines

modified lower_memlib in wn_lower.cxx
when 'trip_count' has operator of OPR_ARRAY, an assertion will reported in coderep
so lower 'trip_count' first

------------------------------------------------------------------------
r1118 | paulyuan | 2007-06-20 21:03:51 +0900 (水, 20  6月 2007) | 1 line

Enable .hidden support on x8664 platform.
------------------------------------------------------------------------
r1117 | hjz | 2007-06-20 19:04:42 +0900 (水, 20  6月 2007) | 2 lines

Check in the OpenMP Runtime Library. The RTL lcoated in osprey/libopenmp.

------------------------------------------------------------------------
r1116 | jianian | 2007-06-20 17:36:58 +0900 (水, 20  6月 2007) | 3 lines

Changing strstr() back to strcmp(). The semantic of strstr() doesn't not match here.


------------------------------------------------------------------------
r1115 | ributzka | 2007-06-20 03:30:16 +0900 (水, 20  6月 2007) | 5 lines

Enables If-Conversion to transform a wider varity of
already predicated code. As a result more loops can
be SWPed. In paticular a loop in the CERN benchmark 
TGeoBBox which was not SWPed before.

------------------------------------------------------------------------
r1114 | rhundt | 2007-06-19 01:45:12 +0900 (火, 19  6月 2007) | 6 lines

Support the -ftree-vectorize option(s). More -ftree... options might
come in later.

Code Review: None


------------------------------------------------------------------------
r1113 | fengzhou | 2007-06-18 16:38:05 +0900 (月, 18  6月 2007) | 3 lines

Fix for bug 327.


------------------------------------------------------------------------
r1112 | jianian | 2007-06-18 12:13:42 +0900 (月, 18  6月 2007) | 3 lines

Relex the verification of variable length structure.


------------------------------------------------------------------------
r1111 | tianwei | 2007-06-18 10:52:36 +0900 (月, 18  6月 2007) | 2 lines

Bug fix #332.

------------------------------------------------------------------------
r1110 | syang | 2007-06-18 03:38:16 +0900 (月, 18  6月 2007) | 1 line

forgive my sloppiness: some #ifdef are missing, some are wrong
------------------------------------------------------------------------
r1109 | shiyao | 2007-06-17 22:48:14 +0900 (日, 17  6月 2007) | 4 lines

1. set PI_IS_MAINPU and PU_NO_INLINE for main function. This is already implemented in gnu3.
2. Fix bugs in vtable setting in the front end.


------------------------------------------------------------------------
r1108 | laijx | 2007-06-17 12:54:22 +0900 (日, 17  6月 2007) | 1 line

Remove libgcc2.c from the gccfe, which is useless but may cause error if compiled by GCC 4.x
------------------------------------------------------------------------
r1107 | syang | 2007-06-17 07:12:36 +0900 (日, 17  6月 2007) | 8 lines

This tiny change is about ltoffx+ldxmov/ld8.mov relocation support. The code sequence of global data will become : 
    addl r2=@ltoffx(dataname#),gp, 
    ld8.mov r2=[r2], dataname# // HP cc use ldxmov instead
    ld1 r3=[r2];
Linker will change the ld8.mov into 'mov' if the load from GOT turns out to be unnecessary. To the best of my knowledge, this reloc support is dedicatd to ia64. Since it acutally does not entails HW support, I guess similar tech/trick are availale for other arch. 

This change is super-trival. I associate the OP loading address from GOT with the corresponding symbol, the code-emit is intercerpted so that the ld8.mov can be emitted properly. Some small benchmarks as well as CPU2k are tested. Crafty obtains 3-4% improvement (I am sure it is genuine). Others remain unchanged (or I am not sure). 

------------------------------------------------------------------------
r1106 | shiyao | 2007-06-17 00:18:03 +0900 (日, 17  6月 2007) | 4 lines

Consider vtable for X8664. 
Use SYMOFF instead of SYMIPLT on X8664. 


------------------------------------------------------------------------
r1105 | paulyuan | 2007-06-16 01:55:56 +0900 (土, 16  6月 2007) | 1 line

The optimization code is OK for IA64 but needs careful test on x8664. Close it on x8664 platform. I'll discuss the code with zhoufeng.
------------------------------------------------------------------------
r1104 | paulyuan | 2007-06-16 00:05:49 +0900 (土, 16  6月 2007) | 1 line

Fix bug312. See https://bugs.open64.net/show_bug.cgi?id=312
------------------------------------------------------------------------
r1103 | hucheng | 2007-06-15 18:37:18 +0900 (金, 15  6月 2007) | 3 lines

  Fisrt, modify the driver to link libm, not limsgi, becasue current libmsgi.a has some bug, such as cannot find the "errno";
  Second, fix the bug 317, where access the SUMMARY_SYMBOL array out of range.

------------------------------------------------------------------------
r1102 | shiyao | 2007-06-15 18:06:37 +0900 (金, 15  6月 2007) | 5 lines

This is the workaround for x8664.
Current devirtualization uses INITVKIND_SYMIPLT that is only for IA64.
I will implement the solution for X8664 soon.


------------------------------------------------------------------------
r1101 | shiyao | 2007-06-15 16:51:30 +0900 (金, 15  6月 2007) | 7 lines

Implementation of devirtualization.
ipa_chg.h and ipa_chg.cxx implement class hierarchy graph.
ipa_devitual.h and ipa_devirtual.cxx implement C++ devirtualization.
The switch of devirtualization is "-IPA:enable_devirtualization=true|false". The default is off (false). 
This phase muse be verified after IPA robustness work.


------------------------------------------------------------------------
r1100 | dehao | 2007-06-14 11:54:37 +0900 (木, 14  6月 2007) | 3 lines

A patch to r1094, r1094 should only be applied to IA64.


------------------------------------------------------------------------
r1098 | hucheng | 2007-06-12 22:23:48 +0900 (火, 12  6月 2007) | 3 lines

  When install the libcginstr.a libinstr.a libmsgi.a libfortran.a libffio.a, etc, we should first 
  install the newly built ones if exists, then if no newly built libs, install them from the prebuild lib.

------------------------------------------------------------------------
r1096 | laijx | 2007-06-12 15:59:21 +0900 (火, 12  6月 2007) | 1 line

Change the default Fortran FE compiler from ifort(IA64)/pathf90(x86_64) to openf90
------------------------------------------------------------------------
r1095 | dehao | 2007-06-12 14:57:31 +0900 (火, 12  6月 2007) | 3 lines

This is a fix to r1092, to make the code more maintainable.


------------------------------------------------------------------------
r1094 | dehao | 2007-06-12 11:54:28 +0900 (火, 12  6月 2007) | 6 lines

This is the fix to an ipa compile time & an ipa runtime bug of 252.eon

1. The compile time is huge in if_conv when eon is compiled by O2 ipa, and this fix prevent if_conv from doing redundant checks.
2. There're no explicit definitions to the formal parameters, so register allocation cannot recognize the live range of formal parameters correctly. This fix made explicit definition of the formal parameter registers, and will not harm the performance.


------------------------------------------------------------------------
r1093 | dehao | 2007-06-12 11:45:17 +0900 (火, 12  6月 2007) | 5 lines

This is another bug fixing for ipa runtime bug of 254.gap.
We should exclude these case , such as "cmp.geu a-8,a" into "cmp.geu -8,0" simple, since the code in EBO_Identify_Base_and_Offset will use unsign varible to read the operand. it we just prohibit such optimization.
It is done by Shuxin & Tianwei


------------------------------------------------------------------------
r1092 | dehao | 2007-06-12 11:37:04 +0900 (火, 12  6月 2007) | 4 lines

This is the bug fix to ipa runtime bug of 254.gap. The output register count should not exceed 8, otherwise if there's system call inside the callee, the system call will fail.
Thanks Shuxin and Luis for their kindness help.


------------------------------------------------------------------------
r1090 | laijx | 2007-06-11 16:32:01 +0900 (月, 11  6月 2007) | 1 line

There is a bug when install the prebuild bin files on x8664. This bug will cause the prebuild bin for ia64-cross be installed on x8664-native
------------------------------------------------------------------------
r1083 | laijx | 2007-06-09 18:20:20 +0900 (土, 09  6月 2007) | 1 line

Change the prefix of cc1/cc1plus to /usr to avoid the error about 'permession denied to /.../install'
------------------------------------------------------------------------
r1081 | laijx | 2007-06-09 17:32:03 +0900 (土, 09  6月 2007) | 1 line

Change the version from 3.0 to 4.0
------------------------------------------------------------------------
r1078 | laijx | 2007-06-08 23:13:33 +0900 (金, 08  6月 2007) | 1 line

Fix the bug of driver can not pass the '-Wa,opt-to-assembler' to the assembler correctly
------------------------------------------------------------------------
r1077 | laijx | 2007-06-08 16:28:00 +0900 (金, 08  6月 2007) | 1 line

Change the OPEN64_NAME_PREFIX to 'open' and remove hard-coded 'open' in the source
------------------------------------------------------------------------
r1076 | laijx | 2007-06-08 12:39:29 +0900 (金, 08  6月 2007) | 1 line

Update the document HOWTO-INSTALL-OPEN64
------------------------------------------------------------------------
r1075 | rhundt | 2007-06-08 02:50:12 +0900 (金, 08  6月 2007) | 4 lines

Adding -fno-ivopts
Code Review: Jianain (conceptually ;-)


------------------------------------------------------------------------
r1074 | jianian | 2007-06-07 22:17:40 +0900 (木, 07  6月 2007) | 2 lines

Complete OPT_FEEDBACK interface.

------------------------------------------------------------------------
r1073 | jianian | 2007-06-07 22:10:30 +0900 (木, 07  6月 2007) | 3 lines

Add option -fivopts for compatibility issue.


------------------------------------------------------------------------
r1072 | zx | 2007-06-07 16:47:07 +0900 (木, 07  6月 2007) | 4 lines

removed:
INSTALL.native INSTALL.cross INSTALL.x8664
Make.x8664.lib Make.NUE.lib Make.native Make.cross Make.x8664

------------------------------------------------------------------------
r1071 | zx | 2007-06-07 16:42:03 +0900 (木, 07  6月 2007) | 4 lines

chang install dir: 
$TOOLROOT/usr/bin -> $TOOLROOT/bin
$TOOLROOT/usr/lib -> $TOOLROOT/lib

------------------------------------------------------------------------
r1070 | laijx | 2007-06-07 11:32:35 +0900 (木, 07  6月 2007) | 3 lines

Update the Makefiles in targia32_builtonia32, change BUILD_OPTIMIZE from DEBUG to DEFAULT
Update the Makefile, adjust the building sequence

------------------------------------------------------------------------
r1069 | hucheng | 2007-06-06 14:50:55 +0900 (水, 06  6月 2007) | 2 lines

  Sorry for missing the right ")"

------------------------------------------------------------------------
r1068 | hucheng | 2007-06-06 14:46:34 +0900 (水, 06  6月 2007) | 2 lines

  Currently, value_profile_need_gra is noly for TARG_IA64

------------------------------------------------------------------------
r1067 | hucheng | 2007-06-06 11:12:17 +0900 (水, 06  6月 2007) | 3 lines

  Fix the bug 326.


------------------------------------------------------------------------
r1066 | laijx | 2007-06-06 00:49:09 +0900 (水, 06  6月 2007) | 1 line

Add the missing dependency libcomutil.a libiberty.a libcmplrs.a to wgen
------------------------------------------------------------------------
r1065 | laijx | 2007-06-06 00:23:48 +0900 (水, 06  6月 2007) | 4 lines

Correct an error in Makefile when build the crayf90. 
Change the condition to build the Fortran FE. 
If the FC is valid, the Fortran FE will be built.

------------------------------------------------------------------------
r1064 | laijx | 2007-06-05 23:20:10 +0900 (火, 05  6月 2007) | 1 line

Fix #325 in BugZilla, make the level of the ST and its ST_ATTR the same
------------------------------------------------------------------------
r1063 | laijx | 2007-06-05 18:18:13 +0900 (火, 05  6月 2007) | 1 line

Remove the range check for 'i' constraint in inline asm. Because there is no document about the range.
------------------------------------------------------------------------
r1062 | syang | 2007-06-05 04:56:03 +0900 (火, 05  6月 2007) | 1 line

return the name of new built-in functions
------------------------------------------------------------------------
r1061 | laijx | 2007-06-04 21:54:47 +0900 (月, 04  6月 2007) | 1 line

Fix the bug 324 in BugZilla, add support to 'e' and 'Z' constraints.
------------------------------------------------------------------------
r1060 | laijx | 2007-06-04 21:26:47 +0900 (月, 04  6月 2007) | 1 line

Fix #323 in BugZilla, support the 'P' and 'ri' or 'ir' constraints correctly
------------------------------------------------------------------------
r1059 | jianian | 2007-06-03 11:15:38 +0900 (日, 03  6月 2007) | 3 lines

Revert check-in 999. The CFG is not usable in ipl summry phase.


------------------------------------------------------------------------
r1058 | laijx | 2007-06-03 11:02:30 +0900 (日, 03  6月 2007) | 1 line

Fix an error in Makefile when detecting the machine type
------------------------------------------------------------------------
r1057 | laijx | 2007-06-03 01:55:18 +0900 (日, 03  6月 2007) | 1 line

fix segmentation fault when invoke ipa_link out of the driver. There still has bugs in how to use the TOOLROOT and PATH. Will fix later.
------------------------------------------------------------------------
r1056 | hucheng | 2007-06-03 01:51:33 +0900 (日, 03  6月 2007) | 4 lines

  Bug fix for OSP_279, initializing the right typeinfo of EH, namely, emitting
  the corresponding INITO into *.data section, not *.bss section.


------------------------------------------------------------------------
r1055 | laijx | 2007-06-02 21:41:56 +0900 (土, 02  6月 2007) | 1 line

correct libmsgi.a on IA64 and clobber targia32_x8664/libfortran
------------------------------------------------------------------------
r1052 | laijx | 2007-06-02 01:13:29 +0900 (土, 02  6月 2007) | 1 line

Continue correcting errors in the install script
------------------------------------------------------------------------
r1051 | laijx | 2007-06-02 00:41:25 +0900 (土, 02  6月 2007) | 1 line

Correct a typo of libmsgi.a
------------------------------------------------------------------------
r1050 | laijx | 2007-06-01 22:04:01 +0900 (金, 01  6月 2007) | 6 lines

Makefile is a general makefile for both ia64 and x8664/ia32, compiler and libraries.
We can use 'make' to build the compilers, 'make library' to build the libraries.
For more information, we can run 'make help'.
install_compiler.sh is used to install the components of the compiler. It can runs on both ia64 and x8664/ia32. The 'make install' command will invode this script.
kdriver is used to build the linux kernel on x8664/ia32.

------------------------------------------------------------------------
r1049 | laijx | 2007-06-01 14:54:26 +0900 (金, 01  6月 2007) | 2 lines

Change the DIR from kpro64/targ... to osprey/targ...

------------------------------------------------------------------------
r1048 | laijx | 2007-06-01 12:58:12 +0900 (金, 01  6月 2007) | 3 lines

Promote osprey/libspin to the top level of trunk
Enable the Makefiles and Install scripts

------------------------------------------------------------------------
r1047 | laijx | 2007-05-31 23:00:27 +0900 (木, 31  5月 2007) | 1 line

Rename kpro64 to osprey. The makefile will not work in several hours
------------------------------------------------------------------------
r1046 | laijx | 2007-05-31 22:59:12 +0900 (木, 31  5月 2007) | 1 line

Promote gnu4_fe to the top level of trunk. The makefile will not work in several hours
------------------------------------------------------------------------
r1045 | laijx | 2007-05-31 21:20:14 +0900 (木, 31  5月 2007) | 1 line

Only build cc1/cc1plus in the GNU4 FE, add --host=x86_64-redhat-linux to the CONFIGURE.x8664
------------------------------------------------------------------------
r1044 | hucheng | 2007-05-30 23:55:19 +0900 (水, 30  5月 2007) | 2 lines

  Revert the Rev1040, because this will break some cases in spec2k6.

------------------------------------------------------------------------
r1043 | hucheng | 2007-05-30 22:50:14 +0900 (水, 30  5月 2007) | 3 lines

  Remove the redudant code " #if 0 ".


------------------------------------------------------------------------
r1042 | dehao | 2007-05-30 15:17:50 +0900 (水, 30  5月 2007) | 3 lines

Fix the assertion when -WOPT:skip_a is set. Done by Sun.


------------------------------------------------------------------------
r1041 | syang | 2007-05-30 04:35:55 +0900 (水, 30  5月 2007) | 1 line

This check-in transfers changes made to GNU3 two months ago to GNU4. That change is about identifying the _ctype_b_loc() etc as intrinsic op to render it possible to opptimize them as a normal expression. The motivating example can be found in parser@spec2k which can be improved by about 10% on ia64 platform. TODO: Currently, the isdigit(), isupper() and other stuffs in ctype.h remain isdigit(), isupper() after g++ (not gcc)'s CPP. GCC 4.x does treat them as built-in functions, but Open64 does not. I guess this kind of opt will be generally helpful for text processing programs
------------------------------------------------------------------------
r1040 | hucheng | 2007-05-30 00:40:36 +0900 (水, 30  5月 2007) | 3 lines

  Fix the merge error, related to the lower_call() in wn_lower.cxx.


------------------------------------------------------------------------
r1038 | laijx | 2007-05-30 00:14:22 +0900 (水, 30  5月 2007) | 1 line

Change pathf95 to openf95 and PathScale(TM) to Open64
------------------------------------------------------------------------
r1037 | laijx | 2007-05-29 22:16:29 +0900 (火, 29  5月 2007) | 3 lines

Remove a wrong #ifdef ... #endif in libfortran, which may cause some FORTRAN programs crash.
Add a fake MAIN__ to main.c to avoid the ld complain 'can not find MAIN__' when the main is defined in C part in C/FORTRAN mixed programs.

------------------------------------------------------------------------
r1036 | fengzhou | 2007-05-29 17:47:13 +0900 (火, 29  5月 2007) | 3 lines

something must change when clobbering cygnus,  is no make in kpro64/targcygnus_ia64_ia64/  running kpro64/targcygnus_ia64_ia64/CLOBBER would get "rm: no match" error.  change this file to ignore the error.


------------------------------------------------------------------------
r1035 | fengzhou | 2007-05-29 15:22:08 +0900 (火, 29  5月 2007) | 4 lines

1. build the fortran fe only when BUILD_COMPILER=OSP
2. make clobber much more cleaner.  Now  make clobber -f Make.native will remove all the file gened in the process of building compiler. 


------------------------------------------------------------------------
r1034 | laijx | 2007-05-29 14:58:31 +0900 (火, 29  5月 2007) | 8 lines

Continue fixing the problem of the PATH. Now the IPA should work both on IA64 and X8664.
There are at lease four cases:
1. Add opencc to $PATH and Set the $TOOLROOT
2. Set $TOOLROOT, call opencc from a relative path or absolute path
3. DO NOT set $TOOLROOT, add opencc to $PATH
4. DO NOT set $TOOLROOT, call opencc from a relative path or absolute path


------------------------------------------------------------------------
r1033 | syang | 2007-05-29 03:07:07 +0900 (火, 29  5月 2007) | 6 lines

Currently, the Aliased_Memop() call EVERY alias rule until not-alias is returned. It is changed into this style: when one of the alias rules returns a DEFINITE alias result-- be it definite-alias or definite-not-alias -- the rest alias rules are ignored. The purpose of this change is two-fold: 1) prevent ANSI-rule or any other decl-based alias rule from being called when conflict has already been detected. 2) (theorectically:-)) save some compile time. 

I use a enum ALIAS_KIND_CODE to describe aliasing kind: not alias, possible/definite alias, identical..... Currently, only not-alias, possible/definite are used. "idenitical" etc are for the future. Some alias rules no longer return boolean type, it return class ALIAS_KIND instead which is the wrapper of ALIAS_KIND_CODE. Because all call-site of of alias-stuff treat the return-type as boolean, the "operator BOOL() const" in ALIAS_KIND() is used to bridge boolean and class ALIAS_KIND. 

TODO: 1) detect the "identical" case which may be useful for dead indirect store elimination. 2) CG DEP constrution can caplitalize on the alias result to differentiate "dotted" ARC and "non-dotted" ARC.

------------------------------------------------------------------------
r1032 | laijx | 2007-05-29 02:25:44 +0900 (火, 29  5月 2007) | 3 lines

FIx the path for IPA.
We have unified the directory structure and usage on both IA64 and X8664. It breaks the IPA. This fix correct the wrong paths for IPA.

------------------------------------------------------------------------
r1031 | zx | 2007-05-28 18:24:42 +0900 (月, 28  5月 2007) | 2 lines

fix some typo of last commit

------------------------------------------------------------------------
r1030 | zx | 2007-05-28 18:00:59 +0900 (月, 28  5月 2007) | 4 lines

fix the library path on x8664
save toolroot in variable "global_toolroot"
when install to a unexisted dir, create it automatically first

------------------------------------------------------------------------
r1029 | laijx | 2007-05-28 12:55:27 +0900 (月, 28  5月 2007) | 2 lines

Build the GNU4 FE in the targia64_ia64_nodebug/targia32_x8664 directory.

------------------------------------------------------------------------
r1028 | fengzhou | 2007-05-28 12:05:26 +0900 (月, 28  5月 2007) | 2 lines

include fortran front end into making progress. do not use prebuild version now.

------------------------------------------------------------------------
r1027 | fengzhou | 2007-05-28 12:03:27 +0900 (月, 28  5月 2007) | 3 lines

fix bug 303. when there is only cascaded ld dependency, the old code did not make a recovery block. 
This would cause run time error. 

------------------------------------------------------------------------
r1026 | zx | 2007-05-28 11:52:12 +0900 (月, 28  5月 2007) | 4 lines

1. If $TOOL_ROOT is set, everything is the same; otherwise, INSTALL.${ARCH} will ask for an install directory, and $TOOL_ROOT is determined automatically at runtime. So acctually no ENV is needed in for either installing and runtime.
2. Directory on x8664 is changed to $TOOL_ROOT/usr/lib/gcc-lib/x86_64-open64-linux/ and $TOOL_ROOT/usr/bin for compatibility to open64 on ia64 and gcc.
3. Removed the soft link of $TOOL_ROOT/usr/bin/gcc&g++; open64 will find gcc&g++ in $PATH at runtime

------------------------------------------------------------------------
r1025 | zx | 2007-05-28 11:23:40 +0900 (月, 28  5月 2007) | 2 lines

deleted the #if 0 block of new/delete overloaded operator according to pathscale's code

------------------------------------------------------------------------
r1024 | syang | 2007-05-28 02:54:42 +0900 (月, 28  5月 2007) | 1 line

part of points-to summary, not yet enabled
------------------------------------------------------------------------
r1022 | laijx | 2007-05-26 01:51:45 +0900 (土, 26  5月 2007) | 2 lines

Fix the #315 in BugZilla: Add support to const symbol input for inline asm with 'i' constraint.

------------------------------------------------------------------------
r1021 | hucheng | 2007-05-25 22:52:06 +0900 (金, 25  5月 2007) | 2 lines

   Bug fix for 314#, which triggered assertion error only when -m32 on X86.

------------------------------------------------------------------------
r1020 | fengzhou | 2007-05-25 18:31:43 +0900 (金, 25  5月 2007) | 4 lines

Fix of bug 265.
Turn a always-taken conditional branch into unconditional branch.


------------------------------------------------------------------------
r1019 | tianwei | 2007-05-25 12:55:08 +0900 (金, 25  5月 2007) | 2 lines

move this part into ebo guard condition, otherwise it will meet LRA assertion

------------------------------------------------------------------------
r1018 | zx | 2007-05-25 12:42:45 +0900 (金, 25  5月 2007) | 2 lines

PBO bugs from CCVS, using libinstr2 instead of libinstr

------------------------------------------------------------------------
r1017 | syang | 2007-05-25 10:31:06 +0900 (金, 25  5月 2007) | 1 line

This change fixes the bug about wrong file-number in the .file directive. In the origial code, there was a comment about GNU GAS's problem. And the original author tried to fix that problem. However, that fix was wrong, and problem of GAS cannot be found in later release. This change does not nothing but getting rid of those wrong 'fix'.
------------------------------------------------------------------------
r1016 | tianwei | 2007-05-25 09:54:19 +0900 (金, 25  5月 2007) | 5 lines

1.fix the regression of 447.deaII,see bug no 313, add a recal_liveness pass
after first pass of ebo before first pass of cflow
this also fix the latest regression of IPA problem for bootstrap compiler.
2.revert 1000 and 1001's checkin, it cause 453.provay's endless running time 

------------------------------------------------------------------------
r1015 | laijx | 2007-05-24 17:07:31 +0900 (木, 24  5月 2007) | 4 lines

Build and install the libmsgi on X8664/i386
Do not build the 64bit libraries on i386 host
Change the default compiler from PSC to OSP for libelf, libdwarf and libopenmp

------------------------------------------------------------------------
r1014 | jianian | 2007-05-24 17:00:13 +0900 (木, 24  5月 2007) | 2 lines

Fix the bug #299 and #306. To fix the bug #306, a inline function Gen_Literal_TN_Ex has been added into tn.h. Since the inline function used the marco INT32_MIN and INT32_MAX defined in stdint.h, and those two marcos are enabled only when __STDC_LIMIT_MACROS is defined, we need to add -D__STDC_LIMIT_MACROS in Makefile.gbase(Since many files included tn.h, it's an easier way to define that marco in Makefile). And the source files which has already defined __STDC_LIMIT_MACROS will cause a warnig for macro refiniation. To avoid that warning, those defines are elimiated.

------------------------------------------------------------------------
r1011 | paulyuan | 2007-05-24 15:38:55 +0900 (木, 24  5月 2007) | 1 line

Fix lower_complex_expr issue on m32. Debug-version opencc will report assertion when compiling complex.c in 462.libquantum of spec2006. When INTRINSIC_OP is in the imagpart of the complex expr lower function should avoid storing the realpart in the eax because it conflicts with the return register of INTRINSIC_OP. Store it in a temp register.
------------------------------------------------------------------------
r1009 | laijx | 2007-05-23 16:58:34 +0900 (水, 23  5月 2007) | 3 lines

Modify the gcommondefs to enable boot strap on X8664
Use opencc/openCC/openf90 to build the libraries.

------------------------------------------------------------------------
r1008 | zx | 2007-05-23 16:13:57 +0900 (水, 23  5月 2007) | 2 lines

PBO bug fix, see bug 262 & 282

------------------------------------------------------------------------
r1007 | zx | 2007-05-23 16:08:07 +0900 (水, 23  5月 2007) | 2 lines

fix for PBO bug, see bug252

------------------------------------------------------------------------
r1006 | hucheng | 2007-05-23 11:17:35 +0900 (水, 23  5月 2007) | 2 lines

fix for bug300 only for x8664

------------------------------------------------------------------------
r1005 | syang | 2007-05-22 10:46:46 +0900 (火, 22  5月 2007) | 1 line

optimization about __attribute__((noreturn)) semantic
------------------------------------------------------------------------
r1004 | hucheng | 2007-05-21 18:37:01 +0900 (月, 21  5月 2007) | 3 lines

  Modify the default build option to -O2 -fno-strict-aliasing, r.e., BUILD_OPTIMIZE=NODEBUG.


------------------------------------------------------------------------
r1003 | tianwei | 2007-05-21 15:45:07 +0900 (月, 21  5月 2007) | 2 lines

fix  this assertion for the time being. it break the bootstrap compiler when adding Is_True_On flags.

------------------------------------------------------------------------
r1002 | fengzhou | 2007-05-21 15:40:28 +0900 (月, 21  5月 2007) | 2 lines

Use -OPT:alias=no_typed to temporarily work around s_data.c file so that we can also bootstrap fortran fe.

------------------------------------------------------------------------
r1001 | dehao | 2007-05-21 12:49:44 +0900 (月, 21  5月 2007) | 2 lines

Fix the error in #1000, the PU_size after inlining should be Orig_Caller.PU_Size + Orig_Callee.PU_Size - 1, Because OPR_FUNC_ENTRY is not calculated into PU_Size.

------------------------------------------------------------------------
r1000 | dehao | 2007-05-21 00:19:57 +0900 (月, 21  5月 2007) | 3 lines

Fix the pu_size estimation of a PU. And it also fix the size update while doing inlining. We can now disable the "operator" heuristic which is aimed at making the inlining of MatrixInversion work well.


------------------------------------------------------------------------
r999 | jianian | 2007-05-20 18:15:11 +0900 (日, 20  5月 2007) | 4 lines


Pass CFG to summary phase in IPL.


------------------------------------------------------------------------
r998 | syang | 2007-05-20 13:38:16 +0900 (日, 20  5月 2007) | 1 line

At the end of CG_Generate_Code(), CXX_DELETE() is called upon region_tree. However, this pointer is not set properly if region hierarchy is not constructed
------------------------------------------------------------------------
r997 | fengzhou | 2007-05-19 14:02:12 +0900 (土, 19  5月 2007) | 4 lines

1. ipo_inline_util.cxx for fixing inliner bug #277
2. ipa_cg.cxx for fix a bug when doing IPA tracing. Some other phases (e.g. IPA_Convert_Icalls) rely on the IPA_NODE's visited flag, so clear it after printing the trace
3. fix bug 296 (x86 targ has this fix, merge it to ia64)

------------------------------------------------------------------------
r996 | rhundt | 2007-05-19 01:42:23 +0900 (土, 19  5月 2007) | 7 lines

Fix for another WHIRL writing error on Google code.
This one only materialized at -m32 and - I think - only
with DEBUG compiler.

The fix was provided by Gautam (Pathscale). Thanks a ton.


------------------------------------------------------------------------
r995 | syang | 2007-05-18 13:15:26 +0900 (金, 18  5月 2007) | 1 line

add new files to the points-to analysis
------------------------------------------------------------------------
r994 | rhundt | 2007-05-18 04:45:29 +0900 (金, 18  5月 2007) | 13 lines

Tim (Pathscale) fixed the -m32 register allocator bug.
Bugzilla: #259


Allow CG to use ASM "m" operands directly from memory instead 
of first loading it into a register.  Always do this 
optimization for local symbol operands, even if -fPIC.  

Restricts fix to bug 5575 to fix bug 12605.  Related to bug 3111.

Thanks!


------------------------------------------------------------------------
r993 | tianwei | 2007-05-17 23:02:09 +0900 (木, 17  5月 2007) | 2 lines

fix some extern "C" conflicts with no extern"C" caught by the latest g++ 4.1.1, provided by Fred.

------------------------------------------------------------------------
r992 | laijx | 2007-05-17 11:22:57 +0900 (木, 17  5月 2007) | 2 lines

Revert the changes on kpro64/kgccfe/gnu/libgcc2.h in rev 987.

------------------------------------------------------------------------
r991 | rhundt | 2007-05-17 09:50:08 +0900 (木, 17  5月 2007) | 6 lines

Bug fix for #274 - WHIRL writing error.

This fix was contributed by Fred. Thanks a ton!



------------------------------------------------------------------------
r990 | rhundt | 2007-05-17 09:42:00 +0900 (木, 17  5月 2007) | 9 lines

Bug fix for #286

This fix works around a problem in the gcc FE, where 
a symbol assember name is being checked for being set,
and it is, but the actual name is still NULL.

Contributed by Fred


------------------------------------------------------------------------
r989 | fengzhou | 2007-05-16 16:59:53 +0900 (水, 16  5月 2007) | 4 lines

Fix bug 276 & 281.
Add a condition "if (ST_IDX_level(new_idx) == GLOBAL_SYMTAB)".


------------------------------------------------------------------------
r988 | laijx | 2007-05-16 12:08:00 +0900 (水, 16  5月 2007) | 3 lines

Enable attribute "syscall_linkage" in GNU4 FE(wgen) on IA64, 
which is essential for building IA64 linux kernel.

------------------------------------------------------------------------
r987 | hucheng | 2007-05-16 11:29:10 +0900 (水, 16  5月 2007) | 7 lines

  This checkin are related to three aspects:
  1). Modified the TF to XF when emulate long double, WORKAROUND the build error "unable to emulate 'TF'" using gcc-4.1.
      XF and TF is related to long double support, 80-bits-extented or 128-bit IEEE float. The current IMPLEMENTATION on IA64       is F10, .r.e., 80-bits-extented, not 96 nor 128. So it doesn't matter that modify like this, right? I remember Robert 
      has also met this problem when building opencc on X8664.
  2). Fix the bug 257#, related to overwrite betweeen iput arguments of the struct of long double.
  3). Fix the attribute setting of ST, bootstrap problem.

------------------------------------------------------------------------
r986 | hucheng | 2007-05-16 11:10:16 +0900 (水, 16  5月 2007) | 3 lines

  Modified the fix in Rev975 which breaks down the 435.gromacs in spec2k6.


------------------------------------------------------------------------
r985 | tianwei | 2007-05-16 09:15:21 +0900 (水, 16  5月 2007) | 2 lines

revert this change, we shouldn't do such workaround before finding the root cause. so just let it being.

------------------------------------------------------------------------
r984 | shiyao | 2007-05-16 00:44:44 +0900 (水, 16  5月 2007) | 4 lines

Clear STs during initialization.
Otherwise, random paddings in ST structs may make bcmp/memcmp miscompare.


------------------------------------------------------------------------
r983 | jianian | 2007-05-15 23:41:38 +0900 (火, 15  5月 2007) | 4 lines

Fixed Bug 292. 
Now in the LNO phase, when renaming a variable for an OpenMP region, no SHARED clause will be appended after a master directive. 
(by Jiangzhou)

------------------------------------------------------------------------
r982 | tianwei | 2007-05-15 22:07:36 +0900 (火, 15  5月 2007) | 2 lines

similar to r940, fix the performance regression at "-ipa -O3 -gnu4"

------------------------------------------------------------------------
r981 | shiyao | 2007-05-15 21:30:02 +0900 (火, 15  5月 2007) | 6 lines

GNU3 FE changes corresponding to new type merge.
1. Set anonymous array types;
2. Set anonymous struct types;
3. Set anonymous fields.


------------------------------------------------------------------------
r980 | tianwei | 2007-05-15 18:16:32 +0900 (火, 15  5月 2007) | 6 lines

comment out this statement for ia64. this fix the running time of perlbmk at ipa for both gnu3 and gnu4.
the problem is that this statement will make identified two iload has different e_version(identified means that
the alias store between them are fake). for this case, these two Iload are in same bb, betwen them is a fake alias store.
this conservative default vsym will break the use-def search chain for vsym, and it will bring different e_version for them.
but I don't know why it will cause correctness problem.Maybe bugs is in other place. 

------------------------------------------------------------------------
r979 | shiyao | 2007-05-15 15:37:20 +0900 (火, 15  5月 2007) | 9 lines

Fix for new type merge phase.
1. Fix a merge mistake that redefine local varible "tmp" in computing hash value;
2. Fix a merge mistake that does not use the new partial match in function Validate_Recursive_Type;
3. Set anonymous array in front end (just for GNU4);
4. Add process of KIND_ARRARY in function Is_Incomplete_Or_Recursive.

Now bug #251 is fixed. In 176.gcc, I confirm that rtunion_def and rtx_def are unified in global.


------------------------------------------------------------------------
r978 | laijx | 2007-05-15 13:36:21 +0900 (火, 15  5月 2007) | 4 lines

Modify an assertion at line 69.
The size of gspin_t is different on IA64 and X8664. On the former, it's 
32 and on the later, it's 20.

------------------------------------------------------------------------
r977 | paulyuan | 2007-05-15 11:53:20 +0900 (火, 15  5月 2007) | 1 line

Merge Fred's fix (rev970) in wgen_decl.cxx to open64. See rev970 for what this fix solve.
------------------------------------------------------------------------
r975 | hucheng | 2007-05-14 16:34:10 +0900 (月, 14  5月 2007) | 6 lines

  Fix the bug 258#, when the ty corresponding to the wn 
  is KIND_STRUCT, then the field_id should not be zero, 
  except that it is the outmost (top_level) un-nested struct. 
  Converserly, if the corresponding TY is not KIND_STRUCT,
   we must set the field_id of wn is zero.

------------------------------------------------------------------------
r974 | paulyuan | 2007-05-13 18:21:13 +0900 (日, 13  5月 2007) | 1 line

Assign SHF_ALLOC flag to .eh_frame section. This allows .o without -fPIC to be linked correctly when building dynamic shared object on x8664. This fix doesn't affect IA64.
------------------------------------------------------------------------
r973 | hucheng | 2007-05-12 11:15:29 +0900 (土, 12  5月 2007) | 2 lines

  Substitue 8 spaces with TAB.

------------------------------------------------------------------------
r972 | hucheng | 2007-05-12 11:03:11 +0900 (土, 12  5月 2007) | 4 lines

  Add build directory of gnu4_fe in targ*, so that gmake -f Make* in top trunk can 
  automatically build cc1 and cc1plus, then automatically install them, as well as clobber.
 

------------------------------------------------------------------------
r971 | dehao | 2007-05-12 10:00:31 +0900 (土, 12  5月 2007) | 2 lines

Bug fixing to bug #266

------------------------------------------------------------------------
r970 | rhundt | 2007-05-12 02:27:27 +0900 (土, 12  5月 2007) | 15 lines

This checkin fixes a WHIRL writing error for a special instance
of a static initializer. This problem showed up in a certain class
of generated sources at Google and since there are many such files,
the problem showed up very often.

This file was provided by Fred Chow / Pathscale and fixes this issue
for all of the generated files.

The changes are quite substantial.

Code Review: Fred 

THANKS!


------------------------------------------------------------------------
r969 | hucheng | 2007-05-11 17:48:39 +0900 (金, 11  5月 2007) | 5 lines

  Build the libgspin.a in BUILD_BASE, r.e., in targ* directory. This has two benefits:
  1). When using gmake -f Make.native clobber, this can be automatically clobbered.
  2). In one working copy, we can build IA-64 version and X86 version, even though this is less happened.


------------------------------------------------------------------------
r968 | fengzhou | 2007-05-11 14:24:22 +0900 (金, 11  5月 2007) | 3 lines

Transfer Revision 843 from opencc3.1 to current trunk.


------------------------------------------------------------------------
r967 | tianwei | 2007-05-11 10:32:39 +0900 (金, 11  5月 2007) | 2 lines

another patch to r963

------------------------------------------------------------------------
r966 | laijx | 2007-05-10 19:07:16 +0900 (木, 10  5月 2007) | 4 lines

Fix the bug of #254 in BugZilla.
This bug comes with the GNU4 FE. The new GNU4 FE will assign static variables in template into some special sections.
If the section is .gnu.linkonce.b.XXX, we still need to treat it as BSS, not DATA

------------------------------------------------------------------------
r965 | tianwei | 2007-05-10 09:33:00 +0900 (木, 10  5月 2007) | 3 lines

A patch to r963


------------------------------------------------------------------------
r964 | tianwei | 2007-05-10 00:17:06 +0900 (木, 10  5月 2007) | 2 lines

transfer r837 to the trunk

------------------------------------------------------------------------
r963 | tianwei | 2007-05-09 23:00:59 +0900 (水, 09  5月 2007) | 3 lines

region_tree is has CXX_NEW, but there's no corresponding CXX_DELETE to it, it may introduce potentional memory leakage.


------------------------------------------------------------------------
r962 | shiyao | 2007-05-09 20:55:51 +0900 (水, 09  5月 2007) | 5 lines

Type merge in IPA phase has the bug that cannot merge incomplete recursive structs into one TY.
The bug doesn't cause error in general, but fails in C++ devirtualization that must unify the classes in differe files.
This patch fix the bug and it should be verified by devirtualization at last.


------------------------------------------------------------------------
r961 | laijx | 2007-05-09 17:59:02 +0900 (水, 09  5月 2007) | 4 lines

Fix the #255 in BugZilla:
For static variables in exported inline/template functions, mark it UGLOBAL/DGLOBAL and WEAK.
If the gnu 4 mark the variable COMMON, we also mark it COMMON.

------------------------------------------------------------------------
r960 | rhundt | 2007-05-03 08:22:28 +0900 (木, 03  5月 2007) | 7 lines


Remove WRITE attribute from EH sections. This change sync's PathScale 3.0
sources with current open64.

Code Review: Sun Chan


------------------------------------------------------------------------
r959 | syang | 2007-05-02 23:37:01 +0900 (水, 02  5月 2007) | 1 line

remove junks about RSE
------------------------------------------------------------------------
r958 | syang | 2007-05-02 10:24:46 +0900 (水, 02  5月 2007) | 1 line

extrat inlined poorly indented big tracing code and put them in a separated dump-routine.
------------------------------------------------------------------------
r957 | rhundt | 2007-05-02 09:29:37 +0900 (水, 02  5月 2007) | 9 lines

Adding support for the options:
  -iquote
  -frandom-seed

This is probably a gcc 4.x compatibility issue.

Code Review: Sun Chan (Thanks)


------------------------------------------------------------------------
r956 | tianwei | 2007-05-01 16:13:18 +0900 (火, 01  5月 2007) | 3 lines

transfter 832 833 834 835 928 from open3.1 to new trunk, these are shuxin's implict call operand's fix, this transfer
fix the running time error for 176.gcc at -O2 -gnu4(it's a problem when return value's register r8 is reallocated by lra). it's only related to ia64, I had enclosed them by ifdef. also test it on x8664 for spec2kint at -O2.

------------------------------------------------------------------------
r955 | tianwei | 2007-04-30 16:57:03 +0900 (月, 30  4月 2007) | 2 lines

in logif optimization, if the branches target is the entry of a region(such as region a), then thesource op of a region(such as region b) will branches to another bb of  region a, then region a will have two entries, not a seme region any more. this fix the problem when building  bootstrap compiler's problem. 

------------------------------------------------------------------------
r954 | fengzhou | 2007-04-30 15:15:33 +0900 (月, 30  4月 2007) | 5 lines

Move bb_entries to the beginning of the function, to decrease memory footprint for region formation.
The loop is iterated several hundreds of times. Each iteration of the loop allocates memory of amount (2+PU_BB_Count) which is not freed after this loop. 
Adding MEM_POOL_FREE function won't work here, because we have two kinds of memory blocks: mem_block, mem_large_block. If the amount of memory requested for allocation is smaller than MIN_LARGE_BLOCK_SIZE, BLOCK_SIZE + PAD_TO_ALIGN(sizeof(MEM_BLOCK)) size of memory is allocated on mem_block, otherwise the allocation amount is requested_size+MEM_LARGE_BLOCK_OVERHEAD on mem_large_block. However, MEM_POOL_FREE only frees memory in the mem_large_block
, but it does not free memory allocated in the mem_block, where in our case, unfortunately, bb_entries is allocated. 

------------------------------------------------------------------------
r953 | hucheng | 2007-04-30 14:15:48 +0900 (月, 30  4月 2007) | 7 lines

  Enable the ipa on X8664:
    1). 32-bit and 64-bit compatable issue. Fix the bug when dlopen ipa.so, ld report wrong ELF class: ELFCLASS32. 
    2). Fix the bug "*/cc-3.0: No such file or directory"
    3). Fix the bug ipa.so is not founded when -ipa
    4). when -ipa, reset the location of ipa_link to the installed directory
    5). when ipa_link -show -keep, fix the bug "-fpic1 -show is not recognized", duing to the ld driver is /usr/bin/gcc, not $/opencc.

------------------------------------------------------------------------
r952 | laijx | 2007-04-27 03:40:27 +0900 (金, 27  4月 2007) | 4 lines

Fix the bug in C Perennial CVSA/C90/Clause7/3_2_1/P70038.c
See OSP_236 for detail.
This fix is done by YongChong.

------------------------------------------------------------------------
r951 | laijx | 2007-04-27 02:52:37 +0900 (金, 27  4月 2007) | 5 lines

Transfer the fix to OSP_133 from WFE in Open64 3.0 to WGEN.
Correct the section name for a static/global variable.
See https://bugs.open64.net/show_bug.cgi?id=133 for detail.
This fix is done by LiXin.

------------------------------------------------------------------------
r950 | laijx | 2007-04-26 07:23:37 +0900 (木, 26  4月 2007) | 29 lines

Import the GNU4 FE. This FE is based on GCC 4.0.2.
Many unnecessary files/directories have been cut off. Only the gcc, libcpp and libiberty and necessary include files and config files are remained.
The size of the whole gnu4_fe is 61M.

This check-in will not modify the Makefile and install script. There should be more testing on this folder, especially on X8664.
The Makefile and install script will be updated after finishing testing the new GNU4 FE.

To build the GNU4 FE, please follow the steps below:
$ cd <trunk>/kpro64/gnu4_fe/objdir
On IA64, please run:
$ ./CONFIGURE.ia64
On X8664/IA32, please run:
$ ./CONFIGURE.x8664
Then, build the FE:
$ make
There should be NO any ERRORS during make.
At Last, install the FE manually:
On IA64:
$ cp <trunk>/kpro64/gnu4_fe/objdir/gcc/cc1 $TOOLROOT/usr/lib/gcc-lib/ia64-open64-linux/<OPEN64_VERSION>/
$ cp <trunk>/kpro64/gnu4_fe/objdir/gcc/cc1plus $TOOLROOT/usr/lib/gcc-lib/ia64-open64-linux/<OPEN64_VERSION>/
On X8664/IA32:
$ cp <trunk>/kpro64/gnu4_fe/objdir/gcc/cc1 $OPEN64_INSTALL_PREFIX/lib/<OPEN64_VERSION>/
$ cp <trunk>/kpro64/gnu4_fe/objdir/gcc/cc1plus $OPEN64_INSTALL_PREFIX/lib/<OPEN64_VERSION>/

To use the GNU4 FE, just add '-gnu4' to the command line. For example:
$ opencc -gnu4 helloworld.c

Enjoy the GNU4 FE :-)

------------------------------------------------------------------------
r948 | laijx | 2007-04-23 02:17:34 +0900 (月, 23  4月 2007) | 4 lines

Wgen will generate some FQ TCON during handling long double initial data.
This fix changes the type from FQ to F10.
Tested with C/CPP Perennial.

------------------------------------------------------------------------
r947 | hucheng | 2007-04-22 18:52:05 +0900 (日, 22  4月 2007) | 2 lines

  Add file ylwrap newly added by pathscale-3.0 in cygnus.

------------------------------------------------------------------------
r946 | hucheng | 2007-04-22 18:43:08 +0900 (日, 22  4月 2007) | 3 lines

 Add two files newly added by pathscale-3.0 in cygnus.


------------------------------------------------------------------------
r945 | fengzhou | 2007-04-22 15:12:02 +0900 (日, 22  4月 2007) | 2 lines

Remove some useless #ifdefs in cg_loop like TARG_IA64 surrounding with TARG_x8664.

------------------------------------------------------------------------
r944 | fengzhou | 2007-04-22 11:08:55 +0900 (日, 22  4月 2007) | 2 lines

disable rsqrt at any optimization level because it may cause precision problems.

------------------------------------------------------------------------
r943 | hucheng | 2007-04-21 22:58:32 +0900 (土, 21  4月 2007) | 8 lines

1. Replace the directory kpro64/cygnus from pathscale-3.0, which is based on binutils 1.16.10; 
   to make it work, modify the file bfd/elfcode.h and bfd/elf.c, by Jianxin;
2. Fix the assertion when processing IPA_update_ehinfo_in_pu;
3. Fix the error which results wrongly link option of ld;
4. With the new cygnus, the previous ipa_link error "syntax error" was gone, which may dued to the 
   ENV variable LD_LIBRARY_PATH.


------------------------------------------------------------------------
r942 | tianwei | 2007-04-20 10:24:36 +0900 (金, 20  4月 2007) | 3 lines

this fix is try to disable the simplification for OP (SELECT(X,c1,c2)) ->
SELECT(X,OP(c1),OP(C2)) when OP is EXTRACT_BITS. in the modified function,it only has the operator info for EXTRACT_BITS, but no other additional info,such as "bofst,bsize", they are lost. this fix the running time regression for perlbench@2006 at -gnu4 

------------------------------------------------------------------------
r941 | fengzhou | 2007-04-18 14:38:26 +0900 (水, 18  4月 2007) | 5 lines

The fixes are about prefetch whirl node generation. 
One is to enhance the condition of testing whether a whirl node is the induction variable.
The other is to increase the default value of Prefetch_iters_ahead to 8. Its previous value, 2, is too small for some cases.


------------------------------------------------------------------------
r940 | tianwei | 2007-04-18 13:41:41 +0900 (水, 18  4月 2007) | 3 lines

change the heuristic number for recursice call in gra.this fix the regression of
perlbmk at -gnu4. 

------------------------------------------------------------------------
r938 | fengzhou | 2007-04-16 15:21:44 +0900 (月, 16  4月 2007) | 3 lines

fix the bug of random errors in gamess. 
It cause by uncorrectly to schedule an instruction over an check instruction.

------------------------------------------------------------------------
r937 | laijx | 2007-04-15 08:22:12 +0900 (日, 15  4月 2007) | 4 lines

Fix the runtime error of c0517101.C in Modena 6.2.
Promote the CALL_EXPR in lhs before expanding the rhs.
Tested with C/CPP Perennial and Modena.

------------------------------------------------------------------------
r936 | laijx | 2007-04-14 16:03:40 +0900 (土, 14  4月 2007) | 2 lines

Implement the INTRIN_ISUNORDERED to make perlbench work.

------------------------------------------------------------------------
r935 | syang | 2007-04-14 02:43:20 +0900 (土, 14  4月 2007) | 1 line

fix gcc 4.x compile complains
------------------------------------------------------------------------
r934 | laijx | 2007-04-14 02:16:02 +0900 (土, 14  4月 2007) | 4 lines

For the variable qualified by 'const volatile', our compiler will treat it as 'const'. It's wrong.
With this fix, the variable will not be marked as 'const'. The 'const' qualifier will be checked only at FE.
Tested with C/CPP Perennial.

------------------------------------------------------------------------
r933 | syang | 2007-04-14 01:10:25 +0900 (土, 14  4月 2007) | 1 line

remove writable-string to make gcc 4.1 happy
------------------------------------------------------------------------
r932 | laijx | 2007-04-13 04:03:08 +0900 (金, 13  4月 2007) | 5 lines

For static variable in template function, the GNU FE will mark it both STATIC and WEAK.
The wgen will generate a EXTERNAL and WEAK st for this variable. It's wrong.
With this fix, the st is COMMON and WEAK.
Tested with C/CPP Perennial.

------------------------------------------------------------------------
r931 | laijx | 2007-04-13 04:00:30 +0900 (金, 13  4月 2007) | 3 lines

Fix wrongly lower ARRAY to LDA when the element of array is zero ( empty struct ).
Tested with C/CPP Perennial.

------------------------------------------------------------------------
r929 | rhundt | 2007-04-12 08:37:32 +0900 (木, 12  4月 2007) | 4 lines

Minor modification to fix build problem for targia32_x8664.
Code Review: Sun Chan


------------------------------------------------------------------------
r926 | ributzka | 2007-04-11 03:08:02 +0900 (水, 11  4月 2007) | 2 lines

The 'merge' branch is now our new trunk.

------------------------------------------------------------------------
r924 | ributzka | 2007-04-11 02:50:10 +0900 (水, 11  4月 2007) | 1 line

Move r894 from trunk.
------------------------------------------------------------------------
r923 | paulyuan | 2007-04-10 13:00:34 +0900 (火, 10  4月 2007) | 2 lines

Fix a merging issue.

------------------------------------------------------------------------
r921 | laijx | 2007-04-10 08:27:38 +0900 (火, 10  4月 2007) | 3 lines

Fix the bug of modify_expr in array_expr, (p=q).x[2]
Refer GCC 4.0.2 gcc.c-torture/compile/struct-non-lval-3.c for detail.

------------------------------------------------------------------------
r920 | laijx | 2007-04-10 07:00:34 +0900 (火, 10  4月 2007) | 2 lines

Check the arguments for VA_START and issue an error if it's less than two.

------------------------------------------------------------------------
r919 | paulyuan | 2007-04-09 01:05:48 +0900 (月, 09  4月 2007) | 2 lines

Fix merging issue in cg_loop.cxx for x8664.

------------------------------------------------------------------------
r918 | laijx | 2007-04-08 07:06:15 +0900 (日, 08  4月 2007) | 4 lines

Fix the assertion in wgen in g++ test suite.
The case is g++.old-deja/g++.mike/p7626.C.
Tested with CPP Perennial 7.1

------------------------------------------------------------------------
r916 | laijx | 2007-04-07 05:36:53 +0900 (土, 07  4月 2007) | 3 lines

Fix the assertion in gcc test suite about GS_IF_STMT.
The case is g++.old-deja/g++.pt/crash50.C

------------------------------------------------------------------------
r915 | syang | 2007-04-07 02:39:41 +0900 (土, 07  4月 2007) | 1 line

remove unnecessary ifdef directive
------------------------------------------------------------------------
r913 | tianwei | 2007-04-06 14:15:14 +0900 (金, 06  4月 2007) | 2 lines

transfer the trunk 854 into branches

------------------------------------------------------------------------
r911 | laijx | 2007-04-06 10:29:11 +0900 (金, 06  4月 2007) | 3 lines

Check Tianwei's fix on WOPT for LDBITS, tested with CPP Perennial.
Fix an assertion in WGEN when expanding __attribute__((alias))

------------------------------------------------------------------------
r909 | laijx | 2007-04-06 08:33:47 +0900 (金, 06  4月 2007) | 3 lines

I made a mistake. Rev 904 and 905 about fixing 'unaligned access' are wrong.
This check-in will correct rev 904.

------------------------------------------------------------------------
r908 | laijx | 2007-04-06 04:24:07 +0900 (金, 06  4月 2007) | 4 lines

Fix the assertion in gcc.c-torture/compile/goto-1.c about the LABEL_EXPR
Can pass this case at all optimization levels.
a simple case: int f(int x) { if (x) { L1; } }

------------------------------------------------------------------------
r907 | tianwei | 2007-04-05 17:32:41 +0900 (木, 05  4月 2007) | 2 lines

This is the fix to disable Sequential_Branch_Heuristic in Branch Prediction, which will introduce regression to IA64

------------------------------------------------------------------------
r906 | tianwei | 2007-04-05 12:18:14 +0900 (木, 05  4月 2007) | 3 lines

move r900 from trunk


------------------------------------------------------------------------
r904 | laijx | 2007-04-05 08:08:55 +0900 (木, 05  4月 2007) | 4 lines

Remove redundant libspin header files in wgen.
wgen will use the header files in libspin.
Fix the unaligned access for long double in wgen

------------------------------------------------------------------------
r903 | syang | 2007-04-05 06:08:36 +0900 (木, 05  4月 2007) | 1 line

move r849 from trunk
------------------------------------------------------------------------
r901 | syang | 2007-04-05 02:47:19 +0900 (木, 05  4月 2007) | 1 line

move r883 and 886 from trunk
------------------------------------------------------------------------
r899 | hucheng | 2007-04-04 16:05:15 +0900 (水, 04  4月 2007) | 3 lines

  Fix the wrongly merged code in cg_loop.cxx.


------------------------------------------------------------------------
r898 | fengzhou | 2007-04-04 13:45:03 +0900 (水, 04  4月 2007) | 2 lines

Disable generating L1 prefetch on IA64, otherwise it will cause performance degradation.

------------------------------------------------------------------------
r897 | laijx | 2007-04-04 11:14:48 +0900 (水, 04  4月 2007) | 5 lines

Fix the #229 about COND_EXPR in BugZilla. 
trunk and merge GNU3 FE also have this bug. This fix is only checked in wgen of merge.
If the result of one operand of COND_EXPR is MTYPE_V,
generate an unused ST according the type of COND_EXPR and return that ST by OPR_COMMA.

------------------------------------------------------------------------
r896 | laijx | 2007-04-04 03:54:26 +0900 (水, 04  4月 2007) | 4 lines

Expand INTRN_ISLESSGREATER during converting WHIRL to OPS.
INTRN_ISLESSGREATER is converted to fcmp.neq here.
If expand it in FE can get better performance, please expand there.

------------------------------------------------------------------------
r895 | laijx | 2007-04-04 01:44:59 +0900 (水, 04  4月 2007) | 4 lines

Fix bugs about variable arguments for long double and va_copy
Fix the bug of the intrinsic powil in GNU4 FE
Tested with C Perennial and CPP Perennial at -O0

------------------------------------------------------------------------
r893 | tianwei | 2007-04-03 12:21:37 +0900 (火, 03  4月 2007) | 2 lines

transfer the trunk 851 into branches

------------------------------------------------------------------------
r890 | tianwei | 2007-04-03 11:41:50 +0900 (火, 03  4月 2007) | 2 lines

enhancement for eon's performance done by dehao

------------------------------------------------------------------------
r889 | tianwei | 2007-04-03 11:38:21 +0900 (火, 03  4月 2007) | 2 lines

workaround gcc -O2's bug for opt_wovp.cxx

------------------------------------------------------------------------
r888 | fengzhou | 2007-04-03 11:17:45 +0900 (火, 03  4月 2007) | 2 lines

This is a fix to bwaves which fails O3 before, and tested by spec2k and spec2k6 fp. tn_info_use function gets tninfo for physical registers, so we should compare the two predicate TN physical registers equality rather than TN.

------------------------------------------------------------------------
r887 | laijx | 2007-04-03 05:39:35 +0900 (火, 03  4月 2007) | 6 lines

Fix the runtime error for these experssion:
int e = (a>b) + (c>d);
where both (a>b) and (c>d) are boolean expressions.
This fix prevent generating CVTL for the result of ADD.
Tested with C Perennial and CPP Perennial at O0.

------------------------------------------------------------------------
r885 | jianian | 2007-04-02 18:45:54 +0900 (月, 02  4月 2007) | 1 line

Enabled reprivatization for OpenMP program.
------------------------------------------------------------------------
r884 | fengzhou | 2007-04-01 12:03:01 +0900 (日, 01  4月 2007) | 2 lines

Remove r880 check-in for bwaves, this check-in breaks some other spec cases

------------------------------------------------------------------------
r881 | laijx | 2007-03-31 06:51:51 +0900 (土, 31  3月 2007) | 2 lines

Fixed bug #249, tested with cperennial and cpppernnial.

------------------------------------------------------------------------
r880 | fengzhou | 2007-03-30 20:43:49 +0900 (金, 30  3月 2007) | 2 lines

When compared two predicate TNs in post ebo, we should only compare the physical registers identical. Remove some redundant MACRO control code.

------------------------------------------------------------------------
r879 | fengzhou | 2007-03-30 17:40:05 +0900 (金, 30  3月 2007) | 2 lines

Merge bug fixes, patches done in ICT (up to the latest revision) in the main trunk to the branch 

------------------------------------------------------------------------
r878 | syang | 2007-03-30 14:29:31 +0900 (金, 30  3月 2007) | 1 line

transfer r799, r800, r801, r830 from trunk
------------------------------------------------------------------------
r877 | syang | 2007-03-30 05:54:46 +0900 (金, 30  3月 2007) | 1 line

transfer r784 r790 and r814 from trunk
------------------------------------------------------------------------
r876 | syang | 2007-03-30 05:52:37 +0900 (金, 30  3月 2007) | 1 line

trasfer r842 from trunk
------------------------------------------------------------------------
r875 | hucheng | 2007-03-30 02:18:38 +0900 (金, 30  3月 2007) | 4 lines

  (1). remove unneccessary stuff in libspin, such as tags;
  (2). Refinement of eh_region.cxx to enable osprey to be build by gcc-4.0;
  (3). EH arrangement, enable dump EH related information on X8664, using -Wb,-tt74:0x0ffff.

------------------------------------------------------------------------
r874 | hucheng | 2007-03-29 12:52:38 +0900 (木, 29  3月 2007) | 2 lines

  Remove the redundant intrinsic name.

------------------------------------------------------------------------
r873 | hucheng | 2007-03-28 18:22:23 +0900 (水, 28  3月 2007) | 2 lines

  Comment out the link to libpscrt, which is the private property of pathscale.

------------------------------------------------------------------------
r872 | hucheng | 2007-03-28 18:17:06 +0900 (水, 28  3月 2007) | 3 lines

  Fix the bug "get_intrinsic_name, INTRN_TAN, intrinsic names out of sync".


------------------------------------------------------------------------
r871 | hucheng | 2007-03-28 18:14:39 +0900 (水, 28  3月 2007) | 3 lines

  Rearrange the code related to EH, so one failure of EH in CCVS can pass now.
  Check in Robert's bug fix when using gcc-4.0* to build osprey, through macro __GNUC_MINOR__.

------------------------------------------------------------------------
r870 | hucheng | 2007-03-28 18:06:49 +0900 (水, 28  3月 2007) | 4 lines

  Remove the directory libspin from $OPEN64/ to $OPEN64/kpro64, so as to keep the source tree coherence.
  Besides, modify the Makefile.gbase in krpo64/wgen to forward BUILD_TARGET to the Makefile in libspin.


------------------------------------------------------------------------
r869 | syang | 2007-03-28 10:23:36 +0900 (水, 28  3月 2007) | 1 line

transfer 782 and 783 from trunk. the r783 is fix to the bug in r782
------------------------------------------------------------------------
r868 | fengzhou | 2007-03-27 12:22:36 +0900 (火, 27  3月 2007) | 2 lines

Now we use gcc/g++ to link fortran programs, so we ignore some ld options.

------------------------------------------------------------------------
r866 | hucheng | 2007-03-27 01:10:42 +0900 (火, 27  3月 2007) | 4 lines

  Sorry for adding the option -m32 out of the BUILD_TARG*.
  Adding the override code in wgen_spin_symbol.cxx by previous checkin.


------------------------------------------------------------------------
r865 | hucheng | 2007-03-26 20:49:54 +0900 (月, 26  3月 2007) | 3 lines

  Add the option -m32 when building libspin, otherwise when building wgen on X8664, 
  ld may report incompatiable *.o.

------------------------------------------------------------------------
r864 | fengzhou | 2007-03-26 20:20:53 +0900 (月, 26  3月 2007) | 3 lines

Sorry for changing an enum type's bit-field to 63 on _HOST64, it causes compiler built error.


------------------------------------------------------------------------
r863 | hucheng | 2007-03-26 19:39:42 +0900 (月, 26  3月 2007) | 2 lines

  Merge issue, now can build successfully on X8664.

------------------------------------------------------------------------
r862 | fengzhou | 2007-03-26 18:51:22 +0900 (月, 26  3月 2007) | 2 lines

This is to remove some unused nested #ifdef like: #ifdef TARG_X8664 .. #ifdef TARG_IA64 .. #endif #endif.

------------------------------------------------------------------------
r861 | hucheng | 2007-03-26 18:39:57 +0900 (月, 26  3月 2007) | 19 lines

  Check in the merge of source code pathscale-3.0 developed, which including at least:
    bug fixes
    IPA_Enable_Source_PU_Order
    DEFAULT_UNROLL_MAX 5
    Prefetch Invariant (non-constant) Stride 
    Prefetch_stride_ahead & Prefetch_invariant_stride
    Enable_compose_bits / Enable_extract_bits
    perform floating-point memory copies using integer registers
    Use alternate malloc algorithm
    WOPT_Enable_Str_Red_Use_Context = TRUE; /* use loop content in SR decision */
    IPL_Ignore_Small_Loops
    proc_has_pstatics
    IPA_Enable_Source_PU_Order
    -IPA:ignore_lang
    __builtin_expect
    -fno-gnu-exceptions
  You can refer to pathscale's release notes for more details.
 

------------------------------------------------------------------------
r860 | hucheng | 2007-03-26 18:11:49 +0900 (月, 26  3月 2007) | 3 lines

  Check in the merge of wgen according to pathscale-3.0


------------------------------------------------------------------------
r859 | hucheng | 2007-03-26 17:54:53 +0900 (月, 26  3月 2007) | 5 lines

  Set the storage class of pu scope static varible to SCLASS_PSTATIC. 
  Only in situation when gcc marked it as COMMON and TREE_PUBLIC (decl_node) is true,
  we can set it as SCLASS_COMMON, and export class as EXPORT_PREEMPTIBLE.
  After this, we can build bootstrap successfully now.

------------------------------------------------------------------------
r858 | laijx | 2007-03-26 17:07:58 +0900 (月, 26  3月 2007) | 2 lines

Fix segmentation fault in wn_simp_code.h durign folding complex constants.

------------------------------------------------------------------------
r857 | fengzhou | 2007-03-26 16:15:59 +0900 (月, 26  3月 2007) | 2 lines

cwh_stab.cxx has a long pointer problem, we should use cast_to_long instead of cat_to_int. globals.h has a struct bit-field difference between _HOST32 and _HOST64. They are all FORTRAN FE related.

------------------------------------------------------------------------
r856 | paulyuan | 2007-03-26 16:05:31 +0900 (月, 26  3月 2007) | 2 lines

Fix merging issue about target dependent marco in lra.cxx.

------------------------------------------------------------------------
r855 | laijx | 2007-03-26 15:22:54 +0900 (月, 26  3月 2007) | 3 lines

Add a missing 'case 32' for long double complex.
Tested with C Perennial.

------------------------------------------------------------------------
r852 | laijx | 2007-03-25 17:50:15 +0900 (日, 25  3月 2007) | 2 lines

Add main.o to 32bit libfortran on IA32 platform.

------------------------------------------------------------------------
r850 | laijx | 2007-03-24 16:58:22 +0900 (土, 24  3月 2007) | 2 lines

Fix the bug of INITV of FDESC_EXPR will be emit twice.

------------------------------------------------------------------------
r848 | laijx | 2007-03-24 01:34:22 +0900 (土, 24  3月 2007) | 3 lines

Fix wrongly expand the FDESC_EXPR on IA64.
With this fix, the vtable of C++ object should be correct.

------------------------------------------------------------------------
r847 | paulyuan | 2007-03-24 00:34:01 +0900 (土, 24  3月 2007) | 2 lines

Fix a FE bug in x8664-m32 platform when compiling CCVS Sec20/3-8/P20084.C.

------------------------------------------------------------------------
r845 | laijx | 2007-03-22 11:35:17 +0900 (木, 22  3月 2007) | 3 lines

Fix assertions in wgen for gnu4 FE.
This fix also enable the long double support.

------------------------------------------------------------------------
r841 | laijx | 2007-03-19 14:22:40 +0900 (月, 19  3月 2007) | 2 lines

Fix the assertion at 867 of be/opt/opt_htable.h found in gcc of SPECint2K.

------------------------------------------------------------------------
r840 | laijx | 2007-03-19 13:23:38 +0900 (月, 19  3月 2007) | 2 lines

Fix the compilation error for 252.eon in SPECint2K on x8664.

------------------------------------------------------------------------
r839 | laijx | 2007-03-19 11:52:44 +0900 (月, 19  3月 2007) | 2 lines

Undo rev 838. add a condition BUILD_TARGET = X8664

------------------------------------------------------------------------
r838 | laijx | 2007-03-19 11:10:40 +0900 (月, 19  3月 2007) | 2 lines

Force to build libspin.a to 32bit.

------------------------------------------------------------------------
r831 | laijx | 2007-03-16 16:10:43 +0900 (金, 16  3月 2007) | 3 lines

Force to build the component of the compiler in 32bit on X8664.
This change will not break building the libraries on X8664(both 32bit and 64bit)

------------------------------------------------------------------------
r828 | laijx | 2007-03-15 19:35:39 +0900 (木, 15  3月 2007) | 2 lines

Fix the error during linking: "unresolved symbol: main" when building FORTRAN programs

------------------------------------------------------------------------
r826 | hucheng | 2007-03-14 11:10:19 +0900 (水, 14  3月 2007) | 3 lines

  Delete the predefined macro -DIs_True_On in file kpro64/Makefile.gsetup.


------------------------------------------------------------------------
r825 | laijx | 2007-03-13 21:26:05 +0900 (火, 13  3月 2007) | 4 lines

Build the dependent libraries for wgen. 
Include libcomutil.a, libcmplrs.a, libiberty.a
Install the wgen on X8664.

------------------------------------------------------------------------
r824 | hucheng | 2007-03-12 18:02:48 +0900 (月, 12  3月 2007) | 5 lines

  Fix the bug when building 176.gcc on IA64.
  Fix the strange assertion error at memory.c when initializing memory pool, where pool->magic_num is modified by symtem when dl_open across *.so.
  Modified the Makefile to build wgen and install it.


------------------------------------------------------------------------
r823 | paulyuan | 2007-03-11 20:29:45 +0900 (日, 11  3月 2007) | 2 lines

Fix merging issue about OP_Load.

------------------------------------------------------------------------
r822 | fengzhou | 2007-03-10 17:58:04 +0900 (土, 10  3月 2007) | 2 lines

Inable gcc4.0.2 in ia64.

------------------------------------------------------------------------
r820 | hucheng | 2007-03-10 02:03:52 +0900 (土, 10  3月 2007) | 3 lines

  Wrongly lowered whirl as to long double.


------------------------------------------------------------------------
r819 | hucheng | 2007-03-09 11:46:19 +0900 (金, 09  3月 2007) | 3 lines

  Modify the corresponding Makefile to build library successfully, using gmake -f Make.x8664.lib.
  This is mainly related to -march=anyx86 and option -fno-fast-stdlib, due to the selection of BUILD_*.

------------------------------------------------------------------------
r818 | hucheng | 2007-03-09 11:09:14 +0900 (金, 09  3月 2007) | 2 lines

  Remove the directory of libpscrt. No need to preserve them.

------------------------------------------------------------------------
r817 | hucheng | 2007-03-09 10:57:08 +0900 (金, 09  3月 2007) | 3 lines

  Should NOT use the library libpscrt*.* provided by pathscale,
  so comment the corresponding code in source tree.

------------------------------------------------------------------------
r816 | laijx | 2007-03-08 18:15:27 +0900 (木, 08  3月 2007) | 3 lines

Fix the assertion at line 2990 of be/cg/x8664/expand.cxx, it's caused by a more CVT introduced by C++FE on X8664.
Force to build 32bit compiler on x8664 for there are some bugs with the 64bit version.

------------------------------------------------------------------------
r813 | laijx | 2007-03-07 20:37:47 +0900 (水, 07  3月 2007) | 3 lines

Enable building wgen on IA64. DO not touch the toplevel Makefile (Make.native).
That file will be changed later.

------------------------------------------------------------------------
r812 | laijx | 2007-03-07 20:07:04 +0900 (水, 07  3月 2007) | 1 line

Change TARG from i686 to x86_64 in order to make ld-new on ia32
------------------------------------------------------------------------
r810 | fengzhou | 2007-03-07 17:17:30 +0900 (水, 07  3月 2007) | 2 lines

enable gcc4.0.2 front end.

------------------------------------------------------------------------
r808 | hucheng | 2007-03-06 23:48:29 +0900 (火, 06  3月 2007) | 3 lines

  Add the libpscrt_p.a to command line avoid 
  "undefined reference to `__memcpy_pathscale_opteron'".

------------------------------------------------------------------------
r807 | laijx | 2007-03-06 20:56:24 +0900 (火, 06  3月 2007) | 2 lines

Move to upper directory

------------------------------------------------------------------------
r806 | hucheng | 2007-03-06 20:46:14 +0900 (火, 06  3月 2007) | 2 lines

  Change the PSC_XXX to OPEN64_XXX, omitted at cgemit.cxx.

------------------------------------------------------------------------
r805 | laijx | 2007-03-06 14:11:12 +0900 (火, 06  3月 2007) | 1 line

initial check-in the new GCC 4.02 based FE
------------------------------------------------------------------------
r804 | fengzhou | 2007-03-06 15:46:32 +0900 (火, 06  3月 2007) | 3 lines

This is to change some enviroment variable like PSC_XXX to OPEN64_XXX and add a
new MACRO 'PSC_TO_OPEN64' to identify the modifications.

------------------------------------------------------------------------
r803 | paulyuan | 2007-03-05 19:34:04 +0900 (月, 05  3月 2007) | 2 lines

ifndef KEY --> ifdef TARG_IA64 in Add_OP_To_Sched_Vector.

------------------------------------------------------------------------
r802 | laijx | 2007-03-05 17:38:08 +0900 (月, 05  3月 2007) | 1 line

Create directory for new GCC 4.0.2 based FE
------------------------------------------------------------------------
r797 | paulyuan | 2007-03-03 19:10:46 +0900 (土, 03  3月 2007) | 2 lines

fix a merge mistake. Op_Load is different between x8664 and IA64.

------------------------------------------------------------------------
r796 | laijx | 2007-03-02 19:04:02 +0900 (金, 02  3月 2007) | 2 lines

Fix the bug of the library path passed to linker is wrong on x8664.

------------------------------------------------------------------------
r795 | laijx | 2007-03-02 17:19:47 +0900 (金, 02  3月 2007) | 4 lines

Makefile for building the libraries.
Usage:
$ make -f Make.x8664.lib

------------------------------------------------------------------------
r794 | laijx | 2007-03-02 17:18:55 +0900 (金, 02  3月 2007) | 11 lines

Enable build 32bit/64bit libraries in kpro64/targia32(x8664)_builtonia32
Enable install prebuild Fortran FE and libraries. Steps:
1. create bin/lib symbol link under the top level
$ cd <top_level_dir_of_the_source_tree>
$ ln -s <merge-prebuild>/bin ./bin
$ ln -s <merge-prebuild>/lib ./lib
2. Install the prebuild files by
$ ./INSTALL.x8664
-- or --
$ make -f Make.x8664 install

------------------------------------------------------------------------
r789 | laijx | 2007-02-28 15:57:34 +0900 (水, 28  2月 2007) | 12 lines

Create the top level Makefile for x8664.
This makefile will not build the libraries.
To build the compiler, follow the same steps as the Make.native.
1. Build the compiler on x8664
$ make -f Make.x8664
-- or --
$ make -f Make.x8664 BUILD_OPTIMIZE=DEBUG
2. Install the tools
$ make -f Make.x8664 install
3. Cleanup intermediate files
$ make -f Make.x8664 clobber

------------------------------------------------------------------------
r788 | laijx | 2007-02-27 17:53:35 +0900 (火, 27  2月 2007) | 1 line

Fix the assertion at 427 of kg++fe/tree_symtab.cxx in gcc test suite
------------------------------------------------------------------------
r787 | laijx | 2007-02-27 15:52:21 +0900 (火, 27  2月 2007) | 1 line

Fix the specialization of templates in the clone.cxx can not be compiled by GCC 4.1.1, tested with GCC 3.4.4 and 4.1.1
------------------------------------------------------------------------
r786 | laijx | 2007-02-27 13:40:06 +0900 (火, 27  2月 2007) | 1 line

Fix wrongly merged code for libdwarf
------------------------------------------------------------------------
r785 | hucheng | 2007-02-24 17:10:53 +0900 (土, 24  2月 2007) | 3 lines

  For IA64, ifconversion trigger WOPT_Enable_If_Conv_Limit isset to > 6;
  for other arch, without predication, WOPT_Enable_Simple_If_Conv should be one.

------------------------------------------------------------------------
r781 | laijx | 2007-02-13 17:40:07 +0900 (火, 13  2月 2007) | 1 line

alwayse use gcc/g++ as the assembler and linker on x8664
------------------------------------------------------------------------
r780 | laijx | 2007-02-13 16:40:39 +0900 (火, 13  2月 2007) | 1 line

kpro64/driver/special_options.c, according to pathscale, generate non-pic code by default
------------------------------------------------------------------------
r779 | hucheng | 2007-02-13 16:36:15 +0900 (火, 13  2月 2007) | 3 lines

  Merge the libdwarf.
  pro_section.c, pro_forms.c and pro_frame.c changes relative big.

------------------------------------------------------------------------
r778 | hucheng | 2007-02-13 12:39:25 +0900 (火, 13  2月 2007) | 2 lines

  Fix the mistake.

------------------------------------------------------------------------
r777 | laijx | 2007-02-13 12:12:45 +0900 (火, 13  2月 2007) | 2 lines

Fix the bug in be/driver.cxx and cg/cgexp_internals.h

------------------------------------------------------------------------
r776 | hucheng | 2007-02-13 11:55:20 +0900 (火, 13  2月 2007) | 2 lines

  Fix the bug in driver.cxx.

------------------------------------------------------------------------
r775 | hucheng | 2007-02-13 11:39:07 +0900 (火, 13  2月 2007) | 2 lines

  Check in the mistake merge in libdwarf.

------------------------------------------------------------------------
r774 | hucheng | 2007-02-13 11:21:23 +0900 (火, 13  2月 2007) | 3 lines

  Fix the bug in cgexp.cxx.
  Remove the unneccessary macro TARG_IA64. 

------------------------------------------------------------------------
r773 | hucheng | 2007-02-12 18:17:53 +0900 (月, 12  2月 2007) | 2 lines

  Check in the fixes.

------------------------------------------------------------------------
r772 | hucheng | 2007-02-12 16:33:56 +0900 (月, 12  2月 2007) | 6 lines

  Fix some mistakes in config_lno.cxx..

 --This line, and those below, will be ignored--

M    kpro64/common/com/config_lno.cxx

------------------------------------------------------------------------
r771 | hucheng | 2007-02-12 16:18:32 +0900 (月, 12  2月 2007) | 3 lines

  Merge the config_lno.cxx


------------------------------------------------------------------------
r770 | hucheng | 2007-02-12 16:03:00 +0900 (月, 12  2月 2007) | 3 lines

  Distinguish osprey and pathscale on Use_Call_Shared_Link, Gp_Save_Restore_Opt, Gp_Rel_Aggressive_Opt.
  On IA64, set alias=no_typed by default, but set it to FALSE on X8664.

------------------------------------------------------------------------
r769 | laijx | 2007-02-12 15:05:19 +0900 (月, 12  2月 2007) | 1 line

mofify the wrongly merged code
------------------------------------------------------------------------
r768 | laijx | 2007-02-07 20:58:35 +0900 (水, 07  2月 2007) | 1 line

load wopt.so for x8664
------------------------------------------------------------------------
r767 | fengzhou | 2007-02-07 20:44:13 +0900 (水, 07  2月 2007) | 2 lines

do some modify to let it built in x8664

------------------------------------------------------------------------
r766 | laijx | 2007-02-07 20:36:31 +0900 (水, 07  2月 2007) | 1 line

dynamic linker is not used on X8664
------------------------------------------------------------------------
r765 | laijx | 2007-02-07 18:40:56 +0900 (水, 07  2月 2007) | 1 line

Load cg.so for x8664 and add missing files for cg on x8664
------------------------------------------------------------------------
r764 | laijx | 2007-02-07 16:26:19 +0900 (水, 07  2月 2007) | 1 line

correct a extra ','
------------------------------------------------------------------------
r763 | hucheng | 2007-02-07 12:46:34 +0900 (水, 07  2月 2007) | 2 lines

  Check in the kpro64/be/com/wn_lower.cxx.

------------------------------------------------------------------------
r762 | hucheng | 2007-02-07 11:31:32 +0900 (水, 07  2月 2007) | 2 lines

  Check in the directory ~/pro64/be/com.

------------------------------------------------------------------------
r761 | hucheng | 2007-02-06 23:45:10 +0900 (火, 06  2月 2007) | 3 lines

  Check in the refinement of WOPT.
  Remove the macro PATHSCALE-MERGE-ZHC.

------------------------------------------------------------------------
r760 | laijx | 2007-02-06 21:25:09 +0900 (火, 06  2月 2007) | 1 line

make the FE/ME can be built on x8664
------------------------------------------------------------------------
r759 | laijx | 2007-02-06 19:33:30 +0900 (火, 06  2月 2007) | 1 line

make the be/cg can be built on x8664
------------------------------------------------------------------------
r758 | laijx | 2007-02-06 19:00:42 +0900 (火, 06  2月 2007) | 1 line

Make the BE/CG can be built on X8664
------------------------------------------------------------------------
r757 | hucheng | 2007-02-06 17:47:43 +0900 (火, 06  2月 2007) | 2 lines

  Check in the cgemit.cxx. For my mistake to check it in befor.

------------------------------------------------------------------------
r756 | fengzhou | 2007-02-06 15:37:23 +0900 (火, 06  2月 2007) | 3 lines

Add library directories to build on ia32_x8664.


------------------------------------------------------------------------
r755 | laijx | 2007-02-06 13:54:48 +0900 (火, 06  2月 2007) | 1 line

Add -D__MIPS_AND_IA64_ELF_H for X8664 and MIPS
------------------------------------------------------------------------
r754 | hucheng | 2007-02-06 12:42:39 +0900 (火, 06  2月 2007) | 2 lines

  For cross module reference.

------------------------------------------------------------------------
r753 | hucheng | 2007-02-06 12:17:13 +0900 (火, 06  2月 2007) | 2 lines

  Check in the weak.cxx for cross-load-module reference.

------------------------------------------------------------------------
r751 | fengzhou | 2007-02-06 00:11:21 +0900 (火, 06  2月 2007) | 3 lines

update the x8664 makefile and the installer.
to make in x8664, just cd to dir kpro64/targia32_x8664  && make

------------------------------------------------------------------------
r750 | hucheng | 2007-02-05 18:54:14 +0900 (月, 05  2月 2007) | 5 lines

  Check in the newly added files by pathscale-3.0 in ~/be/cg, 
  as well as the newly directory x8664 in ~/be/cg.
  NOTE: build merged compiler on IA64, NO need to add "-DCG_PATHSCALE_MERGE";
  BTW, last checkin has checked in all of the fils in directory ~/kpro64/be.

------------------------------------------------------------------------
r749 | hucheng | 2007-02-05 18:40:52 +0900 (月, 05  2月 2007) | 8 lines

  Check in the CG, include ~/be/be, ~/be/cg/;
  Check in the instrumentation merge;
  Check in the merge of directry ~/kpro64/common/*;
  Some modify of ipa.
  Just test on IA-64, when build it on X8664, 
  please NOTE add "-DCG_PATHSCALE_MERGE" in ~/Makefile.gsetup.
  Moreover, there must be bugs, I still check in it since other stuffs can do work parallelly.

------------------------------------------------------------------------
r748 | fengzhou | 2007-02-05 18:06:40 +0900 (月, 05  2月 2007) | 3 lines

When the build target is X8664, the new added file include in the mathlb.makeinclude and mathlb.gmakeinclude


------------------------------------------------------------------------
r746 | fengzhou | 2007-02-02 15:54:04 +0900 (金, 02  2月 2007) | 13 lines

Merge libcmplrs, libiberty, libm,libcf,libf,libf90,libF77,libfi,libfortran,libI77,libu,libU77,wgen,clibinc,clibroot.
but the following files do not compile, because of some code didn't implement in ia64.
      gen_ieee_cpp_macros.c
      ieee_exceptions.F90
      ieee_exceptions_types.h
      ieee_module_support.c
      iso_fortran_env.F90
      ieee_arithmetic.F90
      ieee_arithmetic_types.h
      ieee_features.F90 
need to modify kpro64/libfi/mathlb/mathlb.gmakeinclude and kpro64/libfi/mathlb/mathlb.makeinclude.


------------------------------------------------------------------------
r745 | fengzhou | 2007-02-02 15:43:28 +0900 (金, 02  2月 2007) | 2 lines

Merged driver.

------------------------------------------------------------------------
r743 | fengzhou | 2007-02-01 17:49:34 +0900 (木, 01  2月 2007) | 8 lines

The file wn.cxx is fix for bug jianxin reported, like:
int foo()
{
       long double _Complex cd = 1.0;
       cd++;
}
The file wfe_expr.cxx is adding a missing line, and fix for wutil.cxx is expected to fix error report of 1.2 of get_intrinsic_name: Lang/CPerennial9.1/CVSA/C99/Clause7/19_6_12/P73707.c, I've no this case, jianxin test it please.

------------------------------------------------------------------------
r741 | hucheng | 2007-01-31 19:46:34 +0900 (水, 31  1月 2007) | 2 lines

mergre be's ir_tools, libcsup, libdwarf, libelfutil, libelf, libunwind

------------------------------------------------------------------------
r740 | laijx | 2007-01-31 16:19:45 +0900 (水, 31  1月 2007) | 1 line

Fixed by Lianjie, Wrong initialization of float data
------------------------------------------------------------------------
r738 | laijx | 2007-01-31 11:01:49 +0900 (水, 31  1月 2007) | 1 line

Replace the simd.cxx with the pathscale 2.99 for IA64 does not use this phase
------------------------------------------------------------------------
r737 | fengzhou | 2007-01-30 18:20:13 +0900 (火, 30  1月 2007) | 2 lines

Sorry, forgot to modify this include file.

------------------------------------------------------------------------
r736 | fengzhou | 2007-01-30 17:21:54 +0900 (火, 30  1月 2007) | 2 lines

wgen,libspin is needed when built FE on x86. Some changes to include and c&c++ FE to built successfully on ia64.

------------------------------------------------------------------------
r735 | fengzhou | 2007-01-30 16:06:11 +0900 (火, 30  1月 2007) | 2 lines

Checkin merged FE. 

------------------------------------------------------------------------
r732 | hucheng | 2007-01-30 14:55:09 +0900 (火, 30  1月 2007) | 2 lines

  Added PU_is_marked_inline.

------------------------------------------------------------------------
r731 | hucheng | 2007-01-30 14:45:46 +0900 (火, 30  1月 2007) | 2 lines

  Check in the new merged files, added the Shuxin's latest checkins.

------------------------------------------------------------------------
r730 | hucheng | 2007-01-30 12:35:25 +0900 (火, 30  1月 2007) | 2 lines

  Copy the directory kgccfe, kg++fe and crayf90 from pathscale-3.0 to override the corresponding files.

------------------------------------------------------------------------
r729 | hucheng | 2007-01-30 12:20:30 +0900 (火, 30  1月 2007) | 2 lines

  Merge the file kpro64/common/com/symtab_access.h, cause Shuxin have added one attribute PU_HAS_ATTR_MALLOC and PU_HAS_ATTR_PURE.

------------------------------------------------------------------------
r727 | hucheng | 2007-01-30 11:22:39 +0900 (火, 30  1月 2007) | 2 lines

  Added the macro SHARED_BUILD and PATHSCALE_MERGE.

------------------------------------------------------------------------
r726 | hucheng | 2007-01-30 11:19:49 +0900 (火, 30  1月 2007) | 3 lines

  Check in the the ME, including WOPT, LNO and IPA. The corresponding directories are ~/kpro64/ipa, ~/kpro64/be/opt, ~/kpro64/be/lno, ~/krpo64/be/com/, ~/kpro64/common/com, and ~/kpro64/common/util.
  Add two files, kpro64/common/com/be_ipa_util.h and kpro64/ipa/main/optimize/ipo_icall.cxx.

------------------------------------------------------------------------
r725 | hucheng | 2007-01-30 11:06:38 +0900 (火, 30  1月 2007) | 2 lines

  Remove directory merge/trunk, added by mistake.

------------------------------------------------------------------------
r724 | hucheng | 2007-01-30 10:07:43 +0900 (火, 30  1月 2007) | 2 lines

  Create a new branches ~/branches/merge for the current merge with pathscale-3.0.

------------------------------------------------------------------------
r722 | ributzka | 2007-01-30 09:10:22 +0900 (火, 30  1月 2007) | 2 lines

Create new branch 'merge' from trunk

------------------------------------------------------------------------
r721 | syang | 2007-01-30 01:10:01 +0900 (火, 30  1月 2007) | 11 lines

This change is to promote the 2nd ILOAD '*p' int the motivating example shown bellow:
  ----------------------------
  #include <stdlib.h>
  int a, b;
  extern void bar (void);
  void foo (void) {
    int* p = (int*)malloc (20);
    a = *p; bar (); b = *p;
  }
  -----------------------------

------------------------------------------------------------------------
r718 | syang | 2007-01-28 10:25:34 +0900 (日, 28  1月 2007) | 1 line

propagate __attribute__(__const__|__pure__) from FE to BE
------------------------------------------------------------------------
r711 | syang | 2007-01-25 03:05:49 +0900 (木, 25  1月 2007) | 1 line

alias class is not set properly
------------------------------------------------------------------------
r708 | syang | 2007-01-24 13:06:34 +0900 (水, 24  1月 2007) | 1 line

This statement is omitted.
------------------------------------------------------------------------
r707 | tianwei | 2007-01-24 10:38:14 +0900 (水, 24  1月 2007) | 2 lines

fix the bug of 238 by jianxin

------------------------------------------------------------------------
r706 | syang | 2007-01-23 02:13:55 +0900 (火, 23  1月 2007) | 1 line

implement unique-vsym using alias-class. It is off by default. Turn it on by -OPT:vsym_unique=on
------------------------------------------------------------------------
r704 | fengzhou | 2007-01-11 12:57:18 +0900 (木, 11  1月 2007) | 3 lines

Forgot to add OSP_OPT macro in previous checkin. Sorry for that.


------------------------------------------------------------------------
r703 | fengzhou | 2007-01-11 12:46:37 +0900 (木, 11  1月 2007) | 4 lines

Fix Bug 233.
For some cases, prefetch is not able to compute how much cache line ahead.


------------------------------------------------------------------------
r697 | tianwei | 2007-01-08 15:57:21 +0900 (月, 08  1月 2007) | 24 lines

1 This patch is worked by Shuxin and Wenguang.

2 The purpose of the patch is to provide faster long/long and long%long
implementation. GCC's __moddi3 assembly routine is used as a reference.

3. Perforamnce gain
The improvement on parser is 256s vs 270s, roughly 5% improvement. Gap gets
around 2.5% improvement. Improvement on other applications would accumulate
1% improvement on SPEC2K int.

4. Pending issues:

(1) I did not process the condition of "unsigned long". There is a separate
gcc assembly code for it __umoddi3() with just a few instructions different
than the signed version. Also I did not change the code for I4/I2 division
code as Shuxin proposed.
The reason is lack of motivating examples( they can not get speedup in SPEC
2K INT ). While it is worth to do it, I'd rather to check in the current
code to improve the performance of parser because it is more urgent.

(2) div 0
In the current opencc implementation, div 0 won't cause any trouble and we
get wrong results. Will ask Sun how to deal with it.

------------------------------------------------------------------------
r696 | tianwei | 2006-12-30 12:26:36 +0900 (土, 30 12月 2006) | 3 lines

Turn off Glos_Enable_Cntl_Spec_If_Converted_Code by default


------------------------------------------------------------------------
r695 | syang | 2006-12-30 09:18:37 +0900 (土, 30 12月 2006) | 1 line

enable disambiguating heap object
------------------------------------------------------------------------
r694 | fengzhou | 2006-12-29 12:20:57 +0900 (金, 29 12月 2006) | 2 lines

These CVTs should return 0 instead of -1. This can let LNO catch more opportunities. 

------------------------------------------------------------------------
r693 | fengzhou | 2006-12-27 17:37:41 +0900 (水, 27 12月 2006) | 3 lines

We don't need to generate exclusive prefetch (lfetch.excl) for sequential programs.


------------------------------------------------------------------------
r692 | fengzhou | 2006-12-27 16:32:59 +0900 (水, 27 12月 2006) | 2 lines

Fix a typo in cg_loop.cxx, where "wn" should be "mem_wn".

------------------------------------------------------------------------
r691 | tianwei | 2006-12-22 15:34:04 +0900 (金, 22 12月 2006) | 2 lines

bug fixes of 230 and 228 by jianxin

------------------------------------------------------------------------
r690 | fengzhou | 2006-12-22 15:08:16 +0900 (金, 22 12月 2006) | 2 lines

Since bug #210 has been fixed, libffio.a can be built with -O3 now.

------------------------------------------------------------------------
r689 | hucheng | 2006-12-21 17:46:06 +0900 (木, 21 12月 2006) | 5 lines

  Bug fix for OSP_229.
  Due to a bug of handling ternary operators(r.e, COND_EXPR) in the GCC 3.3
  front end. WFE_Expand_Expr convert the ternary operator to an if/else
  statement.

------------------------------------------------------------------------
r688 | hucheng | 2006-12-21 16:39:37 +0900 (木, 21 12月 2006) | 2 lines

  Bug fix for OSP_162, related to wrong gcc tree. Fixed by Jianxin.

------------------------------------------------------------------------
r687 | tianwei | 2006-12-19 21:38:52 +0900 (火, 19 12月 2006) | 9 lines

When if-conv is turned on, a bug revealed. This is the fix to the bug.

For situations like:
OP1: p1,p2 = cmp.eq r1,r2
OP2: (p1) r3 = add r4,r5
There should be a CNTL_SPEC dependence arc from OP2 to OP1. We should not make it SPEC_NONE, otherwise, the dependency info will be lost.
This is a primary fix, will be reviewed by Shuxin when he's back.


------------------------------------------------------------------------
r686 | tianwei | 2006-12-15 11:50:54 +0900 (金, 15 12月 2006) | 3 lines

This is a fix of a bug in if_conv. Previously, it will not do if-conversion for IF...THEN...ELSE... structure, now it will do it.


------------------------------------------------------------------------
r685 | hucheng | 2006-12-14 16:24:38 +0900 (木, 14 12月 2006) | 3 lines

  Bug fix for OPS_219, which is related to "relocation truncated to fit: GPREL22 symbole";
  Bug fix for OSP_227, which is related to segmentation fault when trace CGEMIT information. 

------------------------------------------------------------------------
r684 | hucheng | 2006-12-14 15:54:29 +0900 (木, 14 12月 2006) | 5 lines

  Bug fix for OSP_226.
  Just keep match between the assemble unwind directive "label_state n" and
  "copy_state n", exactly the same as "{" and "}".


------------------------------------------------------------------------
r683 | hucheng | 2006-12-12 17:00:46 +0900 (火, 12 12月 2006) | 3 lines

  Bug fix for OSP_208.
  Related to EH. 

------------------------------------------------------------------------
r682 | hucheng | 2006-12-12 16:56:26 +0900 (火, 12 12月 2006) | 4 lines


  Bug fix for OSP_95.
  Please refer to the comments or bugzilla for more details.

------------------------------------------------------------------------
r681 | hucheng | 2006-12-12 16:52:35 +0900 (火, 12 12月 2006) | 3 lines

  Bug fix for OSP_225.
  Fix unalignment memory access in 253.perlbmk and 400.perlbench.

------------------------------------------------------------------------
r680 | hucheng | 2006-12-12 16:33:15 +0900 (火, 12 12月 2006) | 4 lines

  Bug fix for OSP_224.
  Fix for unaligned memory access in 458.sjeng in spec2k6
  

------------------------------------------------------------------------
r679 | hucheng | 2006-12-12 16:18:29 +0900 (火, 12 12月 2006) | 4 lines

  Bug fix for OSP_95.
  Open64 just forgot add new label corresponding to case_label_idx when processing WFE_Add_Case_Node.


------------------------------------------------------------------------
r678 | hucheng | 2006-12-12 16:05:40 +0900 (火, 12 12月 2006) | 3 lines

  Bug fix for OSP_150 && OSP_201, by ZhouXing.


------------------------------------------------------------------------
r677 | fengzhou | 2006-12-12 11:29:04 +0900 (火, 12 12月 2006) | 2 lines

fix the problem caused by r673 which corrupts perlbench

------------------------------------------------------------------------
r676 | fengzhou | 2006-12-09 15:25:20 +0900 (土, 09 12月 2006) | 4 lines

Add supporting to UNROLL pragma/directive of the innermost loop.
No influence on the performance.


------------------------------------------------------------------------
r675 | fengzhou | 2006-12-08 18:27:37 +0900 (金, 08 12月 2006) | 1 line

 just fix a typo
------------------------------------------------------------------------
r674 | fengzhou | 2006-12-08 18:26:59 +0900 (金, 08 12月 2006) | 1 line

this checkin is to fix the f0/r0 problem, bug #210. Sometimes, cg allocates f0/r0 to unused def tn, and later may delete this op. However if op is volatile, it wont delete. so since f0/r0 cannot be write, it fails. The key problem is to check the volatility when assigning f0/r0
------------------------------------------------------------------------
r673 | fengzhou | 2006-12-07 12:17:31 +0900 (木, 07 12月 2006) | 3 lines

fix for OSP_104 OSP_105 OSP_192.


------------------------------------------------------------------------
r671 | tianwei | 2006-12-01 11:58:20 +0900 (金, 01 12月 2006) | 2 lines

Change the Olimit for O2/O3 from 6000/9000 to 24000/30000.

------------------------------------------------------------------------
r670 | syang | 2006-11-27 04:04:20 +0900 (月, 27 11月 2006) | 1 line

turn on floating point load speculation by default
------------------------------------------------------------------------
r665 | syang | 2006-11-22 11:57:06 +0900 (水, 22 11月 2006) | 1 line

this workaround is used to prevent a block from growing too big. It is up to region formation to control the region size
------------------------------------------------------------------------
r664 | syang | 2006-11-22 11:54:47 +0900 (水, 22 11月 2006) | 1 line

so long as the dedicated TN bound to the granted register is not live at the exit point of the block, it can be granted to LRA.
------------------------------------------------------------------------
r662 | syang | 2006-11-20 02:14:36 +0900 (月, 20 11月 2006) | 1 line

This change installs crt{begin|end}[S].o coming from gcc suite instead of prebuilt archives. Currently, fortran compiler use ld to link and it looks for crt{begin|end}[S].o from phase dir. Those crts should also be found by gcc --print-file-name when the compiler is on native environment. We are preparing the upcoming 3.0 release and hence reluctant to change code
------------------------------------------------------------------------
r661 | tianwei | 2006-11-19 18:10:25 +0900 (日, 19 11月 2006) | 3 lines

1. fix for ipa_link error, rpath is useless, we just delete it as sun suggested
2. also we need to add " -Wl,-dynamic-linker -Wl,/lib/ld-linux-ia64.so.2" for SVR4

------------------------------------------------------------------------
r660 | tianwei | 2006-11-19 18:05:16 +0900 (日, 19 11月 2006) | 2 lines

change the driver info of "opencc -v "

------------------------------------------------------------------------
r659 | tianwei | 2006-11-19 18:03:38 +0900 (日, 19 11月 2006) | 2 lines

ebo fix,just prevents the EBO from generating "cmp p0,p0=r0,r0"

------------------------------------------------------------------------
r658 | tianwei | 2006-11-19 18:01:06 +0900 (日, 19 11月 2006) | 2 lines

turn off alias type for wn_fio.cxx

------------------------------------------------------------------------
r656 | syang | 2006-11-19 03:14:44 +0900 (日, 19 11月 2006) | 1 line

we no longer need to install crt{begin,end}[S].o
------------------------------------------------------------------------
r654 | tianwei | 2006-11-18 14:34:48 +0900 (土, 18 11月 2006) | 2 lines

roll back this changes, only turn off turn off type_alias for wn_fio.cxx

------------------------------------------------------------------------
r653 | syang | 2006-11-18 13:57:59 +0900 (土, 18 11月 2006) | 1 line

Sun decide the release number is 3.0 rather than 2.1
------------------------------------------------------------------------
r652 | tianwei | 2006-11-16 16:12:23 +0900 (木, 16 11月 2006) | 2 lines

turn off type_alias for bootstraping compiler

------------------------------------------------------------------------
r651 | tianwei | 2006-11-16 16:06:11 +0900 (木, 16 11月 2006) | 2 lines

This is a temporary fix for GRA. It shouldn't grant some registers to LRA. However, even if the wrong registers are granted to LRA, LRA should recognize it and not allocate them. This should also be fixed.

------------------------------------------------------------------------
r650 | tianwei | 2006-11-16 11:09:16 +0900 (木, 16 11月 2006) | 3 lines

1. yhd's fix for bug 209.
2. yhd's fix for bug 211

------------------------------------------------------------------------
r649 | tianwei | 2006-11-16 11:07:18 +0900 (木, 16 11月 2006) | 7 lines

our compiler would generate a temp .o file for dwarf info during compiler,so if 
a previous same .o object file exsited, it will be deleted, such as
opencc expr.o -c expr.cxx
opencc c-expr.o -c expr.cxx
ar a.so expr.o c-expr.o
we will found that the first expr.o is missing

------------------------------------------------------------------------
r648 | tianwei | 2006-11-16 11:04:10 +0900 (木, 16 11月 2006) | 2 lines

some small modification for Kernel boot

------------------------------------------------------------------------
r647 | syang | 2006-11-15 01:10:33 +0900 (水, 15 11月 2006) | 1 line

fix to BUG-200
------------------------------------------------------------------------
r646 | hucheng | 2006-11-14 11:17:23 +0900 (火, 14 11月 2006) | 4 lines

Install libstdc++.so into $TOOLROOT/usr/.../lib to avoid linker's complain of 
"undefined versioned symbol name _ZSt10time_put_w@@GLIBCPP_3.2"


------------------------------------------------------------------------
r645 | tianwei | 2006-11-14 10:56:40 +0900 (火, 14 11月 2006) | 3 lines

Changing the copyright of the newly added WOVP files to BSD style.
                                                    -- Jianian

------------------------------------------------------------------------
r640 | syang | 2006-11-12 13:02:59 +0900 (日, 12 11月 2006) | 1 line

use prebuilt mfef95 by default
------------------------------------------------------------------------
r639 | fengzhou | 2006-11-11 20:00:29 +0900 (土, 11 11月 2006) | 5 lines

prebuilt library check-in so that users can build pre-built library from source.

This is NOT turned on by default. If users want to have a try, they can build it with BUILD_COMPILER=OSP var.


------------------------------------------------------------------------
r638 | syang | 2006-11-11 04:43:01 +0900 (土, 11 11月 2006) | 1 line

change minor release number
------------------------------------------------------------------------
r637 | tianwei | 2006-11-10 11:43:25 +0900 (金, 10 11月 2006) | 2 lines

merge kernel branch into the main truck

------------------------------------------------------------------------
r636 | fengzhou | 2006-11-10 10:20:52 +0900 (金, 10 11月 2006) | 9 lines

1. gcommondefs fix for building FORTRAN FE with ICC in static link mode.
2. dag.cxx is fix for bug 198
3. s_utils.c is for fixing tonto and galgel bug. 
These bugs are caused by creating dope vector in FORTRAN library. 
The stride mulitplier in dope vector(or dynamic allocated array) for an array is sizeof(array type)/sizeof(int) (sizeof(int)==32 on native). 
The stride multiplier for normal array is 1.
When we create a new dope vector from an existing dope vector for FORTRAN function calls that use dope vector (like MATMUL), we do should just copy the stride multiplier from source.


------------------------------------------------------------------------
r635 | tianwei | 2006-11-10 10:09:39 +0900 (金, 10 11月 2006) | 5 lines

1.dehao's fix for inline enhancement's side effect.
2.450.soplex's RE's fix, shuxin's 573 checkin didn't solve the problem
perfectly, he classify the problem, and found that WN_object_ty for "Mload"
is not very right.

------------------------------------------------------------------------
r633 | tianwei | 2006-11-08 17:43:15 +0900 (水, 08 11月 2006) | 3 lines

Remove the wrongly checked in fixes in revision 632, sorry for my stupid mistakes.


------------------------------------------------------------------------
r632 | tianwei | 2006-11-08 17:10:51 +0900 (水, 08 11月 2006) | 4 lines

Adds the EH related documents, including EH's implementation framework, 
and runtime specification on IA-64.
Besides, also adds the document "HOW-TO-DEBUG-OPEN64".

------------------------------------------------------------------------
r631 | tianwei | 2006-11-08 10:47:20 +0900 (水, 08 11月 2006) | 5 lines

This is a temporary tuning of inliner. It will:
1. Set correct value to loopnest, which is always 0 previously.
2. Let more PUs with simple structure be inlined.
This will be replaced by more sophisticated interprocedural analysis.

------------------------------------------------------------------------
r630 | syang | 2006-11-07 08:01:27 +0900 (火, 07 11月 2006) | 1 line

The place to exclude a block specified by -Wb,-SKIP:glos_skip_bb_{a|e|b}=pu_num%bb_num was wrong. This change fix the problem. It is for debug purpose. Correctness and performance are not affected
------------------------------------------------------------------------
r626 | syang | 2006-11-03 11:42:37 +0900 (金, 03 11月 2006) | 1 line

keep track of pointer as well as its version for indirect access. three fields are added to POINTS_TO structures for that purpose. Alias analysis use that information to disambiguate access
------------------------------------------------------------------------
r625 | syang | 2006-11-02 09:15:31 +0900 (木, 02 11月 2006) | 1 line

create symblic link to driver each time the INSTALL.native is invokted
------------------------------------------------------------------------
r624 | tianwei | 2006-10-31 17:12:29 +0900 (火, 31 10月 2006) | 4 lines

This checkin is the subsidiary fix for bug 94 at revision 623,
which will trigger link time error like "undefined reference to `Widen_Mtype(unsigned int)'",
Sorry for my mistake.

------------------------------------------------------------------------
r623 | tianwei | 2006-10-31 12:28:23 +0900 (火, 31 10月 2006) | 3 lines

Fix related to bug 94,
Widen the machine type when the rtype of INTCONST is MTYPE_U1(U2)(I1&I2), converting to MTYPE_U4(I4).

------------------------------------------------------------------------
r622 | tianwei | 2006-10-31 11:20:59 +0900 (火, 31 10月 2006) | 7 lines

1. these fix are done by hucheng,related to bugs 101, 103, 105, 117, 118, 130, 132, 140, 141,189, 192.
2. opt_alias_class.cxx are shuxin's workaround for his enhancement,because it gave us trouble, so we just 
checkin here.
3. shuxin suggested me to checkin fix one by one, but unfortunately, we accumalated several fix together
before his suggestion, so we did heavily testing, also test C&fortran@spec2006, there's no regression.
we should checkin one by one in the future. it's a discipline.

------------------------------------------------------------------------
r621 | fengzhou | 2006-10-27 11:55:10 +0900 (金, 27 10月 2006) | 1 line

sorry, this checkin is to modify the comments :-) 
------------------------------------------------------------------------
r620 | fengzhou | 2006-10-27 11:44:02 +0900 (金, 27 10月 2006) | 3 lines

This is to fix bug194&108. When lowering {I,}{LD,ST}BITS in wopt, it creates a new scalar var for the bit-reference, but it didn't set the volatile attribute if the original bit-reference is volatile. Also, when creating 0-version variables for the new scalar var, it didn't set the volatile attribute. So, this fix is to fix this. Actually, this is from Fred Chow.


------------------------------------------------------------------------
r619 | fengzhou | 2006-10-25 10:53:52 +0900 (水, 25 10月 2006) | 9 lines

Fix the bug when compiler build with DEBUG option, it will cause gugdrt.fppized.f in gamess Assertion failure. Next is the detail of the failure.
### Assertion failure at line 683 of ../../be/cg/orc_ict/region_bb_util.cxx:

### Compiler Error in file gugdrt.fppized.f during CFLOW (second pass) phase:

### RGN_Del_Regional_Cfg_Edge(pred_bb_id:193, succ_bb_id:88)::pred_node Id:1 should be a exit node of region 30



------------------------------------------------------------------------
r618 | tianwei | 2006-10-21 10:06:51 +0900 (土, 21 10月 2006) | 5 lines

1. these fixes are done by dehao
2.Before transforming MSELECT to IF...THEN...ELSE, check if the "test condition" is NULL, if it's not, follow the transformation, otherwise, it will not transform MSELECT to IF...THEN...ELSE, but to some "LABEL...GOTO"s.
3.This bug is a FE bug. The reason is that when compiled with -g, the gfecc will not generate correct field_ids. 
The fix is to defer the declaration of DST_Type when dealing with "typedef", in order to prevent circular declarations.

------------------------------------------------------------------------
r615 | fengzhou | 2006-10-20 10:52:31 +0900 (金, 20 10月 2006) | 3 lines

Fix Bug OSP_196.
In some situation, our compiler doesn't generate correct prefetch node for a group of references. According to the theory, we should prefetch the leading reference.

------------------------------------------------------------------------
r614 | fengzhou | 2006-10-19 10:10:48 +0900 (木, 19 10月 2006) | 3 lines

This is HD's fix for bug 178.  In the c frontend when converting gcc AST to WHIRL, the res_type and desc_type of the 1st kid of BIT_FIELD_REF node will be adjusted and aligned. The bug is if the desc_type is MTYPE_V, it will still be changed to res_type, in some situations. This is not right since we do strick type checking for WHIRL nodes, if desc_type is MTYPE_V, it cannot be changed to other types, although MTYPE_V covers lots of other types.


------------------------------------------------------------------------
r613 | syang | 2006-10-15 05:01:57 +0900 (日, 15 10月 2006) | 1 line

prevent some fake pointers from proprogating from rhs to lhs. this change improve ammp@spec2kfp by roughly 4%
------------------------------------------------------------------------
r612 | syang | 2006-10-15 04:59:48 +0900 (日, 15 10月 2006) | 1 line

add a flag -WOPT:agg_alias_class=bool to control aggressive alias clasification
------------------------------------------------------------------------
r611 | ributzka | 2006-09-29 06:00:46 +0900 (金, 29  9月 2006) | 1 line

Change the names of the error and bug files.
------------------------------------------------------------------------
r608 | ributzka | 2006-09-28 08:00:15 +0900 (木, 28  9月 2006) | 1 line

Add install howto
------------------------------------------------------------------------
r594 | ributzka | 2006-09-28 07:34:04 +0900 (木, 28  9月 2006) | 13 lines

This is the first step of reorganizing the repository (and many will 
follow).

The new repository will have the following main structure:
  * branches
    Branches of Open64, like Open64-2.0, will be put here
  * trunk
    Here is our development code.
  * tags
    Final releases, like Open64-2.0, Open64-2.0.1, etc, will be put here 
  * legacy


------------------------------------------------------------------------
r593 | tianwei | 2006-09-27 17:28:45 +0900 (水, 27  9月 2006) | 4 lines

1. these two fixes are done by shuxin, I just test and checkin for him
2. lra fix is for out of bound access which will introduce final SP adjust segment fault
3. whirl2ops is fix for the bug 191.

------------------------------------------------------------------------
r592 | tianwei | 2006-09-27 01:11:23 +0900 (水, 27  9月 2006) | 5 lines

1. these bug fix are bootstrap done by hucheng, because there is no
regression, so we can checkin that now.
2. one problem is the fortran fe, we can't bootstrap it now
3. for detail bug fix info, please refer the bug bugzilar

------------------------------------------------------------------------
r591 | fengzhou | 2006-09-26 12:44:13 +0900 (火, 26  9月 2006) | 3 lines

Change the prefetch level back to CONSERVATIVE, this will bring up bzip2 performance from 876 to 942.
Made some changes to fixes so that they conform to Osprey code style

------------------------------------------------------------------------
r590 | syang | 2006-09-25 13:19:03 +0900 (月, 25  9月 2006) | 1 line

change logo, version number etc
------------------------------------------------------------------------
r589 | fengzhou | 2006-09-25 10:56:39 +0900 (月, 25  9月 2006) | 3 lines

1. interval_processor.cxx scc_finder.cxx interval_processor.h for bug fix 110
2. Others are for FORTRAN FE, now we can use -Werror in gcc during FE compilation

------------------------------------------------------------------------
r588 | syang | 2006-09-25 05:01:52 +0900 (月, 25  9月 2006) | 1 line

change logo, bug report URL etc
------------------------------------------------------------------------
r587 | syang | 2006-09-22 03:10:46 +0900 (金, 22  9月 2006) | 1 line

add the missing files
------------------------------------------------------------------------
r586 | ributzka | 2006-09-21 03:20:43 +0900 (木, 21  9月 2006) | 1 line

change prompt for missing components, the orginal one is missleading
------------------------------------------------------------------------
r585 | tianwei | 2006-09-20 11:15:15 +0900 (水, 20  9月 2006) | 6 lines

1. further refinement for fully unroll enhancement by dehao.
2. previous fix didn't consider the 'HAS_GOTO' carefully, so
it met problem in LNO, sorry for the inconvenience
3. no performance regression except applu, but still better than before 
fully unroll fix. 275s->256s  

------------------------------------------------------------------------
r584 | tianwei | 2006-09-16 18:36:13 +0900 (土, 16  9月 2006) | 9 lines

1. these fix is for fully unroll enhancement done by dehao
2. if the loop trip_count is less than 8, we should do fully unroll for do loop, our 
compiler turn it off for IA64.
3. nearly 3x improvement for TGeoArb8 in cern loop, and 
3% for eon
18% for applu
%6 for fma3d
no regression for other benchamrk 

------------------------------------------------------------------------
r583 | syang | 2006-09-16 12:02:33 +0900 (土, 16  9月 2006) | 1 line

1) workaround for CGIR implicit use/def problem -- see the comments to the functions. 2) fix to 154
------------------------------------------------------------------------
r582 | syang | 2006-09-16 11:59:31 +0900 (土, 16  9月 2006) | 1 line

bug fix to 185. My change may be incomplete and/or bad. Sun is working on that bug also. This change will be substitued by his fix
------------------------------------------------------------------------
r581 | tianwei | 2006-09-15 18:16:42 +0900 (金, 15  9月 2006) | 5 lines

1.fix for bug 184
2. we can find this error caused by a BLOCK in SWITCH WN.
But SWITCH WN can only exist in VH WHIRL, it's impossible encountering here.
So we can need to handle this in vho.

------------------------------------------------------------------------
r580 | tianwei | 2006-09-13 11:48:56 +0900 (水, 13  9月 2006) | 21 lines

1. there fixes are done by jianxin, lixin,shiyao
2.exp_branch.cxx:OSP_144
It is useful for kernel to be compiled with -mconstant-gp let global pointer be a constant value.
In this case, gp is changed but is not restored after calling. This change should not be occurred.
3.alias attribute:OSP_145
3.1 common/com/symtab_verify.cxx
relax the rule of checking the combinations of storage class and export scopes to enable this case (STATIC and XPREEMPTIBLE).
3.2. be/cg/ia64/cgemit_target.cxx:326, CGEMIT_Alias, 
be/cg/cgemit.cxx:534, EMT_Write_Qualified_Name
modify the code for emitting asm code, let symbol 'y' be the alias of renamed 'x'.
4.static function:OSP_146:kpro64/kgccfe/gnu/c-decl.c
FE generates 2 different trees those represent the forward declaration of bar() in foo() and the implementation of bar() below respectively.
The STs of the 2 trees are different and the callee bar() in foo() calls the former bar(). So the later bar() is a dead function and is deleted during inline phase.
The reason for generation of 2 different trees is that the level of the forward declaration is lower than the level of the implementation of bar(). 
Then the implementation of bar() cannot find the forward declaration at its level or above and generates a new ST of bar().
the solution is to put all function declarations at the top level because opencc does not support nested functions.
I think if opencc will support nested functions and their forward declarations, the logic is more complex and current FE is not suitable.
In the function start_decl() in file c-decl.c, push the decl into top level when the code of decl is FUNCTION_DECL.
5. some minor change in data_layout.cxx for section_name fix
6. no performance regression for spec2000 and spec2006's c++ programs

------------------------------------------------------------------------
r579 | tianwei | 2006-09-13 01:48:24 +0900 (水, 13  9月 2006) | 4 lines

1. this fix is try to solve the problem of -g -O0  by dehao
2. -g -O0 shouldn't call local register allocation to ensure debuggbility
3. no performance regression

------------------------------------------------------------------------
r578 | fengzhou | 2006-09-11 09:55:17 +0900 (月, 11  9月 2006) | 3 lines

Sorry, this file should not be check-in. My mistake.


------------------------------------------------------------------------
r577 | fengzhou | 2006-09-11 09:53:19 +0900 (月, 11  9月 2006) | 3 lines

The lra.cxx fixes gamess@O2 mis-compare bug and also wrf's ``invalid instruction'' bug.
The cgemit.cxx is a fix for bug OSP_139

------------------------------------------------------------------------
r576 | tianwei | 2006-09-07 00:14:05 +0900 (木, 07  9月 2006) | 7 lines

1. these are some enhancement for EH implementation done by hucheng
2.enhancement of EH implementation, which includes:
(1). EH info trace, you can dump EH related info using "-Wb,-tt74:0x0f";
(2). Optimizations of EH implementation;
(3). More aggressive optimization of EH, which can be used through option "-foptimize-regions", which is added to optimize EH regions formation. I set it off by default. Of course, the converse  option is "-fno-optimize-regions".
(4) no performance regression for speccpu

------------------------------------------------------------------------
r575 | tianwei | 2006-09-06 16:21:25 +0900 (水, 06  9月 2006) | 6 lines

1.there fix are about section name attribute enhancement done by lixin and jianxin
2.clone.cxx fix the bug no 125
3.data_layout.cxx fix the bug no 129 and 138
4. tree_symtab.h fix the bug no 133
5. no performance regression for speccpu

------------------------------------------------------------------------
r574 | tianwei | 2006-09-06 00:49:28 +0900 (水, 06  9月 2006) | 5 lines

1. these file is for inline enhancement done by dehao.
2.to set the weight of overloaded function of operators to 0 if the overloaded functions has no more than two actuals. This implementation is based on the fact that these kind of functions is likely to be very small after optimizations.
3. it solved the inline problem of MatrixInverion in Cern loop.
4. no performance regression for spec2000

------------------------------------------------------------------------
r573 | syang | 2006-09-05 07:26:56 +0900 (火, 05  9月 2006) | 1 line

fix the buf of type-alias problem in disambiguating and memory access with another memory access lowered aggregate copy
------------------------------------------------------------------------
r572 | syang | 2006-09-05 07:25:33 +0900 (火, 05  9月 2006) | 1 line

fix the buf of sign-ext, ref the bug 171 for details
------------------------------------------------------------------------
r571 | syang | 2006-09-05 07:24:59 +0900 (火, 05  9月 2006) | 1 line

fix the buf 170, ref the bug tracking system for details
------------------------------------------------------------------------
r570 | syang | 2006-09-05 07:23:59 +0900 (火, 05  9月 2006) | 1 line

libstdc++.a and libgcc.a should be identical to those used by gcc since we use gcc to link the executable. I notice that some peopel just not install these 2 archives. It is incorrect because ipa_link will not find the them
------------------------------------------------------------------------
r569 | tianwei | 2006-09-01 11:02:58 +0900 (金, 01  9月 2006) | 11 lines

these fix are for spec2006's assertion and running time error done by dehao
1. fix bug no 52 for phi_insertion in pre
2. fix for implicit use in sheduler, shuxin asked me to do a correct
fix, but we had no time to do that, so we just use PLOC to get argument information
3. at -O0, we need to do "u64_lower" for "region"

besides these fix, 450.soplex has structure copy problem(result in wrong alias result), so please add "-OPT:alias=no_typed" option.
4. no performance regression for spec2000, spec2006.

 

------------------------------------------------------------------------
r568 | tianwei | 2006-08-31 00:20:19 +0900 (木, 31  8月 2006) | 17 lines

these fixes are done by jianxin and lixin:
1. bug no. 87
Open64 compiler couldn't identify the branch registers in inline asm statements 
like "b6" in "asm("" : : : "cc", "b6" )" properly. The objective of this fix is 
to make the compiler recognizing this kind of registers.

2.bug no. 88
Certain types of asm statements could cause assertion failure during global code 
motion phase in original Open64 compiler. This problem is due to the compiler back-end
marking wrong arcs as candidates for data speculation in dependence graph. 
Actually, They are not. The objective of this fix is to eliminate this kind inconsistency
in the compiler. 

3. bug no.90
he bug occurred in Pre_Optimizer using native compiler. The same error 
may not happen in cross compiler.

------------------------------------------------------------------------
r567 | fengzhou | 2006-08-30 11:02:52 +0900 (水, 30  8月 2006) | 4 lines

Fortran FE 2.4 checkin. You need to clobber the compiler before rebuild it.
We upload prebuit Libs, prebuilt_AS4_2.4.tar.gz, to Tsinghua FTP server: ftp://166.111.68.169:hpc:hpc:5021 in the directory /incoming. With new prebuilt libs, previous link problem, "IA_64.unwind has both ordered and unordered sections", has been resolved, which means we can use system linker instead of the modified linker.


------------------------------------------------------------------------
r566 | marcel | 2006-08-30 02:36:10 +0900 (水, 30  8月 2006) | 3 lines

Fix missing field initialization.


------------------------------------------------------------------------
r565 | syang | 2006-08-29 23:03:37 +0900 (火, 29  8月 2006) | 1 line

disable speculation of floating point load for the time being
------------------------------------------------------------------------
r564 | marcel | 2006-08-26 03:33:39 +0900 (土, 26  8月 2006) | 7 lines

Implement proper support for long double complex on ia64. This utilizes
the MTYPE_C10 machine type, based on the fact that long double on ia64
uses the MTYPE_F10 machine type. The changes are mostly mechanical in
nature, meaning that they follow naturally from how MTYPE_C4, MTYPE_C8
and MTYPE_CQ are handled.


------------------------------------------------------------------------
r563 | marcel | 2006-08-24 03:17:00 +0900 (木, 24  8月 2006) | 7 lines

Define SUBMAKE and use it for the commands to build the various target
directories.  This gives us a single definition that can be easily
changed for experimental purposes or automated building.  By default
SUBMAKE is defined as ${MAKE}.  Normalize submake invocation commands
while here.


------------------------------------------------------------------------
r554 | fengzhou | 2006-08-21 16:12:42 +0900 (月, 21  8月 2006) | 4 lines

Revert some changes made, which according to Marcel are not right.
use awk script in all cirumstances


------------------------------------------------------------------------
r553 | marcel | 2006-08-19 03:40:45 +0900 (土, 19  8月 2006) | 10 lines

Add a regression test for misalignment floating-point memory operations.
This tests the correctness of the Expand_Misaligned_Load() and
Expand_Misaligned_Store() functions.

Possible future additions:
o  Add integer types.
o  Test optimality of the generated code (it has been observed that
   the compiler is not performance optimimal).


------------------------------------------------------------------------
r552 | marcel | 2006-08-19 03:24:03 +0900 (土, 19  8月 2006) | 36 lines

Implement handling of misaligned long double loads and stores. The
algorithm is based on the setf.sig and setf.exp instructions for
loads and getf.sig and getf.exp instructions for stores. The bit
fiddling achieves the format conversion as described in the SDM,
volume 1, figure 5-9: FP register to memory data translation.
Also, for loads, the exponent is adjusted for the difference in bias
for the register format (bias is 65535) and double-extended memory
format (bias is 16383).

For readability purposes, the handling of FP types has been moved
to Expand_Misaligned_Load() and Expand_Misaligned_Store(), which
leaves Expand_Composed_Load() and Expand_Composed_Store() with the
single task of composing the loads and/or stores. Note that misaligned
long double loads and stores are being decomposed into 2 integer loads
and stores. Since the alignment requirements of the integer loads and
stores are less than that of the original double-extended load or store,
it is possible that Expand_Composed_Load() and Expand_Composed_Store()
is being called for *aligned* memory operations. This case is detected
and diverted to Expand_Load() or Expand_Store().

This change also fixes a related bug in the variant of the memory 
operation. Variants for memory operations encode volatility and
alignment. For misaligned memory operations, the alignment was not
encoded as the log2 of the alignment, as the comments in variants.h
made us believe, but rather as the modulo of the required alignment.
An alignment of 7, for example, has been observed. This is bunk.
The fix is to use ffs() to find the largest log2 alignment and to
encode it by adding 1 to make sure that an alignment of 1 does not
yield a zero-valued alignment. This is because of the non-intuitive
use of the alignment bits of the variant. Consequently, there's no
need for an expensive gcd() to determine the actual alignment.

Bug: osprey/58, osprey/59
Reviewed by: Sun Chan


------------------------------------------------------------------------
r551 | tianwei | 2006-08-07 21:09:31 +0900 (月, 07  8月 2006) | 10 lines

1. these fixes are done by jianian
2. phases.c is for bug 50, a bug from SPEC 2006 471.omnetpp
3. ipo_const.cxx is for bug 71
At IPO, the constant parameter(sz) is propagated and the funtion changes from
buffering(int, char*, ...) to buffering(char*, ...). But the propotype of the
function is forgot being changed.
4. wfe_expr.cxx is for bug 70
Corrected the link path for ipa.
5. no performance regression for spec2000

------------------------------------------------------------------------
r550 | syang | 2006-08-06 23:49:17 +0900 (日, 06  8月 2006) | 1 line

these compile-time problems are figured out by Juergen Ributzka. The fix is self-desciptive.
------------------------------------------------------------------------
r549 | syang | 2006-08-05 05:12:46 +0900 (土, 05  8月 2006) | 1 line

64 bit constant need 'LL' postfix. We would run into a problem when building this complier on PC
------------------------------------------------------------------------
r548 | marcel | 2006-08-03 01:31:37 +0900 (木, 03  8月 2006) | 4 lines

Revert DEBUG builds to use -O0. People have stated that debugging
at -O1 is troublesome.


------------------------------------------------------------------------
r547 | syang | 2006-08-02 23:22:19 +0900 (水, 02  8月 2006) | 1 line

sorry for the terrible typo
------------------------------------------------------------------------
r546 | syang | 2006-08-02 23:00:14 +0900 (水, 02  8月 2006) | 1 line

remove terrible marker. sorry for the nasty word
------------------------------------------------------------------------
r545 | syang | 2006-08-01 07:37:01 +0900 (火, 01  8月 2006) | 1 line

this changes implement this-ptr alias analysis. It is turned on/off by -WOPT:this_ptr={true|false} or -WOPT:this_ptr_opt={true|false}. It is turned off by default for the time being since it is have not yet been intensively tested. eon@CPU2000 sees 5.6% runtime speedup with this enhancement
------------------------------------------------------------------------
r544 | marcel | 2006-08-01 03:18:31 +0900 (火, 01  8月 2006) | 7 lines

o  For DEBUG builds, set the optimization level to -O1 to increase
   its usability. Code generated at -O0 is abominably slow.
o  For NODEBUG builds, add -fno-strict-aliasing. The source code
   does not conform to strict C99 aliasing rules and this causes
   GCC to make invalid assumptions.


------------------------------------------------------------------------
r543 | marcel | 2006-08-01 03:13:45 +0900 (火, 01  8月 2006) | 3 lines

Remove COMMONGOPTS. It's unused acros the whole source tree.


------------------------------------------------------------------------
r542 | marcel | 2006-08-01 03:09:28 +0900 (火, 01  8月 2006) | 6 lines

Don't force the optimization level at -O3 for NODEBUG builds. We're
having major problems building the runtime libraries as it is so
there's no need to be agressive. People can use BUILD_OPTIMIZE=-O3
on the make command-line to play around with higher optimizations.


------------------------------------------------------------------------
r541 | marcel | 2006-08-01 03:06:20 +0900 (火, 01  8月 2006) | 5 lines

Remove OPTIMIZER addition for DEBUG builds. The OPTIMIZER setting is
already handled in Makefile.gsetup and this interferes with any
settings there.


------------------------------------------------------------------------
r540 | marcel | 2006-08-01 02:56:29 +0900 (火, 01  8月 2006) | 13 lines

Remove bug work-arounds specific to GCC and targeting ia32 because:
o  The sources need to be compiled with -fno-strict-aliasing, which
   wasn't done. Optimization-related bugs are very likely the result
   of that, and not of any perceived GCC bug.
o  The work-around to drop the optimization level to -O0 is absurd
   and indicates that the problem hasn't been analyzed properly. One
   work-around merely adds -fno-inline, which seems to indicate that
   -fno-strict-aliasing is the real fix.
o  We do not target ia32 and these work-arounds affect ia64. In fact,
   no problems have been encountered at -O2 (-fno-strict-aliasing was
   in effect), so these work-arounds are an unnecessary pessimization.


------------------------------------------------------------------------
r539 | marcel | 2006-08-01 02:31:40 +0900 (火, 01  8月 2006) | 7 lines

Rewrite Copy_option(), so as to fix the misaligned memory references:
o  Determine the size of the option data first, then select whether it's
   a save or restore operation. This avoids unnecessary code duplication
o  Use memcpy() to copy the data from or to the container. Misalignment
   is not a problem.


------------------------------------------------------------------------
r538 | marcel | 2006-08-01 02:27:10 +0900 (火, 01  8月 2006) | 8 lines

In vsp_get_bytes(), fix misaligned loads. Previously misalignment was
handled by the aligned(1) attribute, but that didn't work. The fix
is to stop trying to be smart and just let the compiler be smart: use
memcpy() to copy from the misaligned source location to an aligned
intermediate value, after which it's assigned to the destination.
This will be optimized by GCC into the necessary byte loads.


------------------------------------------------------------------------
r537 | marcel | 2006-07-28 03:30:50 +0900 (金, 28  7月 2006) | 3 lines

Clobber the arith sub-directory as well.


------------------------------------------------------------------------
r536 | fengzhou | 2006-07-26 09:05:31 +0900 (水, 26  7月 2006) | 3 lines

1. cgtarget.cxx is for bug_30's fix. This bug caused gromacs' runtime error with train input set(but not ref input set). This bug is caused by micro-scheduling.
2. ``Pre-Checkin'' for FE2.4: fix some makefile and fortran naming conversion, so that our diff with Pathscale is much less,yet still working.

------------------------------------------------------------------------
r535 | syang | 2006-07-24 23:55:21 +0900 (月, 24  7月 2006) | 1 line

enable speculation of floting-point load & curtail excessive data speculation which will incur high-penalty check-miss
------------------------------------------------------------------------
r534 | tianwei | 2006-07-24 20:48:08 +0900 (月, 24  7月 2006) | 14 lines

these fixes are done by hucheng
1. bug no. 83#'s fix
2. bug no. 48#'s fix
As known that a region is a region is a set of nodes that include a header, 
which dominates all the other nodes in this region, besides, all the edges are
in this region, except some edges enter it's header. This error mainly resulted
from the header BB may be maped by virtue of the existing edge from other region to it.
So when BB_Depth_First_Map in bbutil.cxx processes map_depth_first, this BB(entry BB) 
may firstly be prcessed, so when processes this BB again, tiggerring the assertion.
3. bug no.49#'s fix.
gfecc can't identify this situation when one stmt like 
"bool_expr ? (Default) Constructor : throw 0;"
4.no performance regression for speccpu2000

------------------------------------------------------------------------
r533 | lin | 2006-07-19 13:19:32 +0900 (水, 19  7月 2006) | 4 lines

Create an empty 'doc' directory to hold documents related to
EH implementation.


------------------------------------------------------------------------
r532 | marcel | 2006-07-19 01:43:59 +0900 (水, 19  7月 2006) | 3 lines

Make dedicated TNs for MTYPE_F10.


------------------------------------------------------------------------
r531 | marcel | 2006-07-19 01:30:03 +0900 (水, 19  7月 2006) | 14 lines

Properly implement long double varargs call-sites. The machine type
MTYPE_F10 does not fit in a single integer register. As such, treat
it as a complex number. Or more generically, as a struct passed by
value. This means that we're going to construct a pointer to the long
double value, and load it in multiple registers. Some caveat exists:
1. non-varargs functions pass long double in FP registers, so we
   need to be careful when to do this.
2. we likely end up with a CLASS_PREG symbol on the OPR_LDID. In
   that case we need to create a temporary to spill to first. This
   was almost completely handled by make_pointer_to_node() already.

Bug: osprey/63


------------------------------------------------------------------------
r530 | marcel | 2006-07-18 02:11:24 +0900 (火, 18  7月 2006) | 14 lines

In expanding the VA_ARG_EXPR expression, align the AP according to the
alignment requirements of the data type in case it's larger than the
nominal slot size or register size.
Also, when creating the OPR_ILOAD statement, make sure the pointer type
is one that corresponds to the data type so that the WHIRL reflects that
the pointer is properly aligned. This was already the case for the C++
FE, but not for the C FE.
While here, clean-up the code so that there's more commonality.

In concrete, this fixes long double varargs on ia64 (callee site).

Bug: osprey/62


------------------------------------------------------------------------
r529 | fengzhou | 2006-07-14 21:37:25 +0900 (金, 14  7月 2006) | 2 lines

Enable -Werror in building except in FORTRAN and C++ FE because these two have warnings

------------------------------------------------------------------------
r528 | tianwei | 2006-07-06 22:29:36 +0900 (木, 06  7月 2006) | 3 lines

EH implementation checkin.
most of these work is done by zhenyu. now we had test the moidfication carefully. there is no performance regression. i will send anther mail about the implementation document and testing result.

------------------------------------------------------------------------
r527 | tianwei | 2006-07-05 09:54:54 +0900 (水, 05  7月 2006) | 5 lines

1. this fix is done by cwg
2. Overriding the operator == to allow comparison of two ST efficiently and safely. Using bcmp to compare class is incorrect
because it compares the padded space between class fields unnecessarily
3. no performance regression for speccpu2000

------------------------------------------------------------------------
r526 | tianwei | 2006-07-04 11:06:22 +0900 (火, 04  7月 2006) | 4 lines

1. fix about "tn assertion" in bug no.37
2. the compiler adapt different ways to generate "BBNE", but it will assume that the kids of the BBNE are both "B" type, it will use these kids as the "predicate operands" in "xor_i" operations. it can't handle when the kids are "1" or "0". for our case, one of the kid is "1", so src1(0x1)  will became the predicate operands,and then the assertions happened.
3. no performance regression for speccpu2000

------------------------------------------------------------------------
r525 | tianwei | 2006-07-03 22:03:00 +0900 (月, 03  7月 2006) | 8 lines

1. this two fixed are done by dehao
2. the first fix is about HFA.
HFA uses a static struct to check the aggregation of floats. It forgot to reset the hfa_mtype to MTYPE_V each time it finishes aggregation checkingHFA uses a static struct to check the aggregation of floats. It forgot to reset the hfa_mtype to MTYPE_V each time it finishes aggregation checkingHFA uses a static struct to check the aggregation of floats. It forgot to reset the hfa_mtype to MTYPE_V each time it finishes aggregation checking
3. the second fix
The compiler produced a segmentation fault when compiling. The segmentation fault happens in line 4496 of kpro64/be/cg/orc_ict/region.cxx.
It is because tmp_str exceeds the size allocated in the stack
4. no performance regression for speccpu2000

------------------------------------------------------------------------
r524 | tianwei | 2006-07-03 16:52:30 +0900 (月, 03  7月 2006) | 5 lines

1.the two fixes are done by jianian
2.first fix about wfe_expr.cxx is for bug no 57.
3.the second fix about ipc is for bug no. 67
4.no regression for speccpu2000

------------------------------------------------------------------------
r523 | marcel | 2006-07-01 03:01:25 +0900 (土, 01  7月 2006) | 8 lines

In Expand_Const(), handle MTYPE_F10 better. In particular, have 1.0L
expanded to hardware register f1 instead of being materialized by a
load. The 2.0L and -1.0L contants get the same treatment as their
float our double counterparts as well.

Bug: osprey/64


------------------------------------------------------------------------
r522 | syang | 2006-06-28 09:46:26 +0900 (水, 28  6月 2006) | 11 lines

add a handy flags to diagnose CG bugs 
-Wb,-SKIP:glos_skip_bb_{e|a|b}=<pu-num>%<bb-num>.

For example, if -Wb,-SKIP:glos_skip_bb_a=3%24 is 
added to the command line, the OPs in blocks whose id > 24 in PU 3
remains unchanged (i.e, no OPs are move into/out-of those blocks, 
and the order of OPs in that blocks are remain unchanged. 
in a nutshell, those blocks are isolated form global scheduling). 



------------------------------------------------------------------------
r521 | syang | 2006-06-28 09:36:29 +0900 (水, 28  6月 2006) | 15 lines

When building output dep arcs for a op, say "op1: rx=...", 
dag.cxx try to find, in op1's home block, another op
,say op2, which defines <rx>. If found, dag.cxx ignore  
all other ops that define <rx> in an attemp to reduce  
transitive arcs. (i.e. there will be output arc between 
op1 and op2, and output arc beteen op2 and 'other ops 
that defines rx', therefore it is not necessary to build
arc between op1 and 'other ops that define rx'). This is 
incorret because the guarding predicates of both op1 and 
op2 may be complete. 

This bug cause gobmk@CPU2006 run-time falure when it 
fed with train or ref input.


------------------------------------------------------------------------
r520 | tianwei | 2006-06-27 15:53:53 +0900 (火, 27  6月 2006) | 5 lines

1. this fix is done by hucheng
2. the first fix is Mainly related to the improper use of function Get_Trace, As suggested by Mike Murphy,     here Get_Trace is just used to conveniently observe code changes, rather than through      adding an official options. So i just removed the use of it in Write_Symoff & Write_Sy     miplt in cgemit.cxx, it's a bad form and got bad result when we compiled with option       "Wb,-tt56:0x02000".
3. the second fix, In function Delete_Unreachable_Blocks in cflow.cxx, should be caution to labels relate     d tO EH, this fixes is just to remove the superfluous condition branch, which makes no     sense and triggeres the assertion, besides, the previous fix is not as good as just re     moving the superfluous condition.
4. no performance regresssion compared to version 514

------------------------------------------------------------------------
r518 | syang | 2006-06-27 08:58:12 +0900 (火, 27  6月 2006) | 1 line

the changes really make no sense. besides, the 'heuristic' is nasty. It if obviously REGION formation\'s fault
------------------------------------------------------------------------
r517 | fengzhou | 2006-06-26 20:57:00 +0900 (月, 26  6月 2006) | 24 lines

sched_cand.cxx: bug #28's fix
Global_Insn_Sched generates a huge BB, which contains about 6000 instructions.
Then LRA_Allocate_Registers will fail on this BB, because the stack frame size
exceeds the MAX value.

Using flag "-TENV:large_stack" ,which means our compiler will allocate 
larger stack frame, also can not solve this problem.

cg_swp_bundle.cxx: bug #22's fix
When compiling bwaves in SPEC2006, SWP phase breaks down: segmentation fault.
Because in function SWP_Delete_Noop, it just delete op from op_state,
and the op isn't removed from BB. It will cause inconsistence.


cg_swp_emit.cxx: bug #43's fix
In function SWP_REG_ASSIGNMENT::Get_Register_TN, a register will be allocated
to tn, however, the assigned register number might be larger than 128, which
will cause assertion error in later phase.
By performing 'early SWP_Fixup'in SWP_REG_ASSIGNMENT::Get_Register_TN can fix
this problem. 

Make.native: when clobbering compiler, clobber the whole FORTRAN FE, instead of only sgi component in it's subdir


------------------------------------------------------------------------
r515 | marcel | 2006-06-24 02:04:14 +0900 (土, 24  6月 2006) | 21 lines

Properly implement support for long double. Since GCC on Linux/ia64 uses
the double extended FP format (equal to __float80 that's present in recent
versions of Linux), this implementation uses the MTYPE_F10 type designator.
This leaves MTYPE_F16 free for use by the __float128 type (also understood
in recent versions of GCC) and consequently reserves it for use by long
double on HP-UX. Whether __float128 will map onto MTYPE_F16 is beyond the
scope of this implementation.

Most of the changes involve including MTYPE_F10 in tests where MTYPE_F4
and/or MTYPE_F8 are being tested for, as they typically need the same
treatment. The notable exception being common/com/ia64/targ_const.cxx,
where most of the "hard work" is done on compile-time contants.

This change does not include support for C99 long double _Complex.

There are no regressions, functionality- or performance-wise. However,
the existing support for MTYPE_F10 in the ORC backend may not have been
exercised sufficiently or at all and subtle optimization bugs relating
to long double can be expected.


------------------------------------------------------------------------
r514 | tianwei | 2006-06-23 21:05:23 +0900 (金, 23  6月 2006) | 4 lines

1. fix the bug number 34
2. this fix solve the problem of ANSI type alias rule for Complex type, otherwise, it will cause runtime error for some testcases.,see more info in bugzillar
3. no performance regression

------------------------------------------------------------------------
r512 | tianwei | 2006-06-22 23:21:39 +0900 (木, 22  6月 2006) | 7 lines

1. fixed the bug number 42, it's a bug in value numbering, the compiler can't handle the following statment correctly:
  LDID B B sym96v3 274 ty=100  <u=2 cr359> flags:0x0 b=-1
  LDID B B sym102v3 281 ty=100  <u=2 cr372> flags:0x0 b=-1
 BBNE <u=1 cr373> isop_flags:0x0 flags:0x1 b=E20
OPR_FALSEBR 14 b=E87 flags:0x2 pj2 Sid87
2. no performance regression compared to speccpu2000.

------------------------------------------------------------------------
r510 | tianwei | 2006-06-22 17:09:29 +0900 (木, 22  6月 2006) | 8 lines

1. this fix is done by hucheng
2. bug no. 45 in bugzillar
 the main cause of this bug is Update_EHRegion_Inito in driver.cxx modifies the flag of the INITO related to try label to 'used', However, gfecc have set on this flag ST_IS_NOT_USED, which indeeds no use in cg
3. bug no.44 in bugzillar
 This bug is caused by the newly added INITVKIND_SYMIPLT for virtual function.
The inliner delete the PU related to virtual function. 
4. more detail info is in bugzillar, no performance regresssion for speccpu2000.

------------------------------------------------------------------------
r507 | tianwei | 2006-06-19 19:48:36 +0900 (月, 19  6月 2006) | 8 lines

1,The building of Depdence graph. the arc from "alloc r33=ar.pfs, 0,4,1,0" to "mov.i ar.pfs = r33" is assign with latency 0. So they may be scheduled into a same cycle, which will produce an illegal instruction. So the fix is to check if the arc is of this kind and decide whether to sign the latency to 0 or not.
 
see the bug num 033 in bugzillar for detail descriptions

2. the implement the floor() fixing to the "long double" version.

3. no performance regression compared to last checkin.

------------------------------------------------------------------------
r505 | tianwei | 2006-06-19 09:51:15 +0900 (月, 19  6月 2006) | 4 lines

When judging whether an instruction is spill/resore, the compiler mainly depends on whether the relative TN's spill field is NULL. This is not trustable when some optimization is performed, propagation for example.
The bug can be fixed by adding an flag to the struct op to tell which op is the
true spill/restore operation.

------------------------------------------------------------------------
r503 | marcel | 2006-06-16 01:38:25 +0900 (金, 16  6月 2006) | 11 lines

Don't define field "type" of struct "exp_tbl_entry" as a 63-bit bitfield
on 64-bit hosts. The type of the field is an enum and by definition not
larger than an integer (it can possibly be a short integer if the compiler
supports this). There is no need for the additional 32-bits and avoids a
compilation error with GCC 3.4.x and above.

NOTE: I seem to recall that C99 defines bitfields on integers only, so the
use of an enum as the base type may not be portable to begin with and may
already cause us problems if enums are short integers.


------------------------------------------------------------------------
r502 | marcel | 2006-06-15 01:51:40 +0900 (木, 15  6月 2006) | 9 lines

Use the Intel Fortran compiler (version 9.0) for building the Open64
Fortran compiler. Introduce a new variable F90_RTLIBS, which holds
the necessary -L and -l options to pull in runtime libraries and
replace the hardcoding of runtime libraries with use of the variable.

The Open64 Fortran compiler needs Intel Fortran libraries at runtime,
so LD_LIBRARY_PATH must be set to contain /opt/intel/fc/9.0/lib.


------------------------------------------------------------------------
r501 | marcel | 2006-06-15 01:45:34 +0900 (木, 15  6月 2006) | 7 lines

Improve generation of the catalog file:
o  Use the caterr.awk awk(1) script instead of the caterr binary, which
   requires a Linux/ia32 runtime.
o  Build the catalog file using normal make dependency rules instead of
   building it as a side-effect to building the FE.


------------------------------------------------------------------------
r500 | marcel | 2006-06-14 03:10:06 +0900 (水, 14  6月 2006) | 11 lines

Add an awk(1) script to replace the caterr tool. The output of caterr.awk 
is identical to that of the caterr tool without the -c option. The -c option 
causes /usr/bin/gencat to be called to generate the catalog file, which can
easily be replaced by a simple process pipe, like: 
        awk -f caterr.awk < cf95.msgs | gencat -o cf95.cat
The output of the above pipe is identical to that of caterr -c.

Using the awk script eliminates the need for ia32 runtime libraries in order
to run the Linux/ia32 binary for non-cross or non-Linux builds.


------------------------------------------------------------------------
r499 | marcel | 2006-06-09 01:38:04 +0900 (金, 09  6月 2006) | 3 lines

Uncomment the C++ front-end. It's been building for a while.


------------------------------------------------------------------------
r498 | marcel | 2006-06-09 01:35:10 +0900 (金, 09  6月 2006) | 10 lines

Move INSTALL_MISC up before the installation of the pre-built bits.
This guarantees that we installed at least all the bits that were
uilt before (possibly) the script fails and terminates. Premature
termination happens when the pre-built bits were not copied to the
source tree prior to running the script.

This also brings the native install script in sync with the cross
install script.


------------------------------------------------------------------------
r495 | tianwei | 2006-06-07 14:30:07 +0900 (水, 07  6月 2006) | 4 lines

1. fix for Omega=0 assertion
   as shuxin said, the root cause is that " Interleave_Base_Updat() can handle quite  well for statements like "*p++ = m; *p++ = n". However, it fail to handle "*p++=p; *p++=p"", I just add code to handle this situation.
2. no performance regression.

------------------------------------------------------------------------
r494 | syang | 2006-06-07 03:42:38 +0900 (水, 07  6月 2006) | 1 line

const can only be const-str. this is fix to the compile-time bug exposed in gobmk@CPU2006
------------------------------------------------------------------------
r493 | syang | 2006-06-07 03:41:08 +0900 (水, 07  6月 2006) | 1 line

it seems to be GNU BASH's bug. the CLOBBER script will erase all files including the files whose name are in upper case which is not expected
------------------------------------------------------------------------
r492 | syang | 2006-06-07 03:39:37 +0900 (水, 07  6月 2006) | 1 line

this DevWarn is both unnecesary and annoying
------------------------------------------------------------------------
r491 | syang | 2006-06-07 03:38:03 +0900 (水, 07  6月 2006) | 1 line

-lm implies -lmv, some intrinsic functions are defined in libmv.a
------------------------------------------------------------------------
r490 | syang | 2006-06-07 03:36:38 +0900 (水, 07  6月 2006) | 1 line

use SEQ_REGIONAL_CFG_ITER to iterate REGION corresponding to irreducible loop
------------------------------------------------------------------------
r488 | tianwei | 2006-06-05 10:42:24 +0900 (月, 05  6月 2006) | 2 lines

I misunderstand shuxin's code. but the testing result is corresonding to the correct version. sorry.

------------------------------------------------------------------------
r486 | tianwei | 2006-06-05 10:15:37 +0900 (月, 05  6月 2006) | 5 lines

1. workround fix for infinite loop detection
2. "pow" fix in both kgccfe and kg++fe
3. wrong  desc for cvtl fix.
4. no regression.

------------------------------------------------------------------------
r484 | tianwei | 2006-06-04 12:42:02 +0900 (日, 04  6月 2006) | 4 lines

1.vtable fix, now the perlbmk and eon can both pass
2.multi_branch fix for single loop body
3.the testing result will be sent in another mail. no regression.

------------------------------------------------------------------------
r483 | syang | 2006-06-03 02:53:13 +0900 (土, 03  6月 2006) | 1 line

remove duplicated linker options
------------------------------------------------------------------------
r479 | syang | 2006-06-02 11:32:54 +0900 (金, 02  6月 2006) | 1 line

disable 2 .y.c and .l.c double-suffix rules since we don't want to let bison and/or flex to generate .c. Those .c source file are alrady provided
------------------------------------------------------------------------
r478 | fengzhou | 2006-05-24 17:42:17 +0900 (水, 24  5月 2006) | 12 lines

FORTRAN Front-End major check-in. this check-in's test is done one revision *472*,
because only in this revision can I pass all the test-cases(expect eon).
Since there is a problem in the latest version (eon and perlbmk can not pass at the same time),
I decided to checkin.

IMPORTANT NOTES:
	To build FORTRAN front-end, you need a gfortran program to bootstrap. This can be installed via
apt-get program. Also, you need ia32-libs to use the caterr program. This can also be installed via
apt-get program.

This check-in also includes a prefetch hint fix.

------------------------------------------------------------------------
r476 | tianwei | 2006-05-22 23:31:39 +0900 (月, 22  5月 2006) | 11 lines

fix the global double type initialize bugs g++fe
fix the double div operation bugs for g++fe and gccfe
fix the bug about virtual function by zhenyu
no regress compared to last checkin
the related four files are:
kpro64/kgccfe/gnu/floatlib.c
kpro64/kg++fe/gnu/floatlib.c
kpro64/kg++fe/gnu/cp/class.c
kpro64/kg++fe/wfe_decl.cxx


------------------------------------------------------------------------
r473 | tianwei | 2006-05-18 23:18:52 +0900 (木, 18  5月 2006) | 19 lines

native C++fe. the work contains
(1)dehao's CFLOOR's fix for eon
(2)zhenyu and zhangjia's fix about Vtable problem
the modification files:
Make.native
kpro64/be/cg/cgemit.cxx
kpro64/be/cg/whirl2ops.cxx
kpro64/be/cg/cflow.cxx
kpro64/common/com/irbdata.cxx
kpro64/kg++fe/wfe_expr.cxx
kpro64/kg++fe/gnu/cp/method.c
kpro64/kg++fe/wfe_decl.cxx
kpro64/kg++fe/wfe_stmt.cxx
kpro64/kg++fe/wfe_dst.cxx
kpro64/kg++fe/tree_symtab.h
kpro64/ipa/main/optimize/ipo_inline.cxx
(3)eon is compiled with the -fno-exceptions -lstdc++
(4)no regression compared to last checkin

------------------------------------------------------------------------
r472 | marcel | 2006-05-18 07:22:44 +0900 (木, 18  5月 2006) | 3 lines

Stop when there's an error.


------------------------------------------------------------------------
r471 | tianwei | 2006-05-18 02:37:51 +0900 (木, 18  5月 2006) | 2 lines

rollback  7 files  modification.

------------------------------------------------------------------------
r470 | tianwei | 2006-05-15 16:46:32 +0900 (月, 15  5月 2006) | 8 lines

this work is done by jianian yan
(1)This optimization finds out large local write once variables and promotes them to static storage area and initializes them at link time to gain performance initializing them every time when entering the function.
(2)For TRandom in CERN Loop, the runtime changes from 43.248s -> 4.8447s
(3) The optimization is turned on by default. To turn off it, pass -WOPT:wovp=off that is give an option 
"Wb,-WOPT:wovp=off" when compiling. also to dump the trace of it, give "-Wb,-tt26:0x20"
(4)no regress at -O2 and -O3 level.


------------------------------------------------------------------------
r469 | fengzhou | 2006-05-11 17:33:46 +0900 (木, 11  5月 2006) | 7 lines

The be/cg/bbutils.cxx is for bug #9's fix
Modified be/cg/ia64/cgdwarf_targ.cxx file to fix bug #8

Modified be/lno/prefetch.cxx to change the default prefetch optimization level
Modified common/com/config.cxx to enable scalar replacement by default O3


------------------------------------------------------------------------
r468 | marcel | 2006-05-11 09:25:42 +0900 (木, 11  5月 2006) | 5 lines

In MinDist::Compute(), don't update mindist[x][y]
when omega is 0. This fixes an infinite loop in
MinDist::MinDist().


------------------------------------------------------------------------
r467 | marcel | 2006-05-11 09:20:41 +0900 (木, 11  5月 2006) | 4 lines

omega can be 0. Don't call Ceiling_Divide when
the sum of is 0. This fixes a divide by 0.


------------------------------------------------------------------------
r466 | marcel | 2006-05-11 06:52:07 +0900 (木, 11  5月 2006) | 4 lines

Declare BB_Insert_Op_After() and BB_Insert_Op_Before() as
static inline.


------------------------------------------------------------------------
r465 | marcel | 2006-05-11 04:41:44 +0900 (木, 11  5月 2006) | 5 lines

Fix segmentation fault in multiple branch phase.
BB_Insert_Op_After() and BB_Insert_Op_Before()
can get called with point equalling NULL.


------------------------------------------------------------------------
r464 | marcel | 2006-05-10 05:11:11 +0900 (水, 10  5月 2006) | 6 lines

Silence the annoying assembler warning "Directive invalid within a bundle".
This is really a GNU assembler bug, but can be worked-around by us by
switching to explicit bundling. Emit the directive only when we emit the
bundling information.


------------------------------------------------------------------------
r463 | marcel | 2006-05-10 04:42:03 +0900 (水, 10  5月 2006) | 3 lines

Re-add the Makefile :-(


------------------------------------------------------------------------
r462 | marcel | 2006-05-10 03:51:45 +0900 (水, 10  5月 2006) | 3 lines

Found it: s/CDEFS/LCDEFS/


------------------------------------------------------------------------
r461 | marcel | 2006-05-10 03:47:38 +0900 (水, 10  5月 2006) | 3 lines

Fix build. The ifneq doesn't seem to work.


------------------------------------------------------------------------
r460 | marcel | 2006-05-10 03:37:34 +0900 (水, 10  5月 2006) | 3 lines

o  Remove unused compiler command line defines.


------------------------------------------------------------------------
r459 | marcel | 2006-05-10 03:36:56 +0900 (水, 10  5月 2006) | 3 lines

o driver.nue has been removed. It was bollocks.


------------------------------------------------------------------------
r458 | marcel | 2006-05-10 03:35:37 +0900 (水, 10  5月 2006) | 4 lines

o  Remove driver.nue. It's bollocks.
o  Normalize BUILD_OPTIMIZE.


------------------------------------------------------------------------
r457 | marcel | 2006-05-10 03:34:43 +0900 (水, 10  5月 2006) | 3 lines

o  Remove driver.nue. It's bollocks.
o  Normalize BUILD_OPTIMIZE.

------------------------------------------------------------------------
r456 | syang | 2006-05-10 00:20:31 +0900 (水, 10  5月 2006) | 1 line

prevent inline a mini-sized function which is infrequent and is called in a big switch (has more than, say, 6 case clauses), a typical example can be found in regexec.c (in Perlbmk benchmark) where reginclass() is not beneficial to be inlinined in regexec_flags(). This enhancement improve Perlbmk on ia64 by as much as 10s (out of 280s).
------------------------------------------------------------------------
r455 | syang | 2006-05-05 02:51:52 +0900 (金, 05  5月 2006) | 1 line

Undoing change commmited in r454
------------------------------------------------------------------------
r454 | syang | 2006-05-05 02:46:35 +0900 (金, 05  5月 2006) | 1 line

This file is duplication of Make.cross. And it is inconsistent with Make.cross
------------------------------------------------------------------------
r453 | marcel | 2006-05-04 06:15:16 +0900 (木, 04  5月 2006) | 4 lines

Install the driver from the right build directory. 
Sheez.


------------------------------------------------------------------------
r452 | marcel | 2006-05-04 06:13:24 +0900 (木, 04  5月 2006) | 5 lines

o Actually built orc_ict and orc_intel. Sheez.
o Stop building arith and crayf90 due to bootstrapping
  broblems.


------------------------------------------------------------------------
r451 | syang | 2006-05-01 01:48:28 +0900 (月, 01  5月 2006) | 1 line

field_type() and WN_object_ty() are copyied directly from ORC. Sun make changes on these 2 functions so that the WN_object_ty(ILOAD-a-structure-field) returns the type of filed instead of the type of stucture
------------------------------------------------------------------------
r450 | syang | 2006-05-01 01:46:19 +0900 (月, 01  5月 2006) | 1 line

prevent DevWarn from going into trace file. To make sure the trace file is both clean and concise
------------------------------------------------------------------------
r449 | syang | 2006-05-01 01:43:58 +0900 (月, 01  5月 2006) | 1 line

remove code that is commendted out
------------------------------------------------------------------------
r448 | syang | 2006-05-01 01:43:13 +0900 (月, 01  5月 2006) | 1 line

disable a Devwarn -- they are too much to be nuisance
------------------------------------------------------------------------
r447 | syang | 2006-05-01 01:40:54 +0900 (月, 01  5月 2006) | 1 line

enable -Wb,-IPFEC:xxxx flag group
------------------------------------------------------------------------
r446 | fengzhou | 2006-04-21 11:07:36 +0900 (金, 21  4月 2006) | 4 lines

Roll back to revision 444, 
vortex run failed at o3 with revision 445
Sorry for the Inconvenience

------------------------------------------------------------------------
r445 | fengzhou | 2006-04-21 10:40:14 +0900 (金, 21  4月 2006) | 6 lines

The be/cg/bbutils.cxx is for bug #9's fix
Modified be/cg/ia64/cgdwarf_targ.cxx file to fix bug #8

Modified be/lno/prefetch.cxx to change the default prefetch optimization level
Modified common/com/config.cxx to enable scalar replacement by default O3

------------------------------------------------------------------------
r444 | lin | 2006-04-19 04:39:41 +0900 (水, 19  4月 2006) | 1 line

Undo r443 changes.
------------------------------------------------------------------------
r443 | tianwei | 2006-04-16 23:39:46 +0900 (日, 16  4月 2006) | 1 line

modified
------------------------------------------------------------------------
r434 | syang | 2006-03-28 04:44:31 +0900 (火, 28  3月 2006) | 1 line

when root->type is bfd...{defined|defweak} the h->root.u.def.section is actually to a bfd rather than a section as we can see in _bfd_generic_link_add_one_symbol()
------------------------------------------------------------------------
r433 | syang | 2006-03-28 04:38:53 +0900 (火, 28  3月 2006) | 1 line

The ST_type can be CLASS_BLOCK for platforms other than x8664
------------------------------------------------------------------------
r432 | syang | 2006-03-21 08:53:49 +0900 (火, 21  3月 2006) | 1 line

fix a typo
------------------------------------------------------------------------
r431 | syang | 2006-03-21 08:33:58 +0900 (火, 21  3月 2006) | 1 line

promote to 64bit quantum and then perform bitwise complement. otherwise, the high order bits are pure 0
------------------------------------------------------------------------
r430 | syang | 2006-03-21 08:32:08 +0900 (火, 21  3月 2006) | 1 line

Make -IPA work on native environment
------------------------------------------------------------------------
r429 | syang | 2006-03-21 08:31:40 +0900 (火, 21  3月 2006) | 1 line

Make -IPA work on native environment
------------------------------------------------------------------------
r428 | syang | 2006-03-21 02:56:06 +0900 (火, 21  3月 2006) | 1 line

reduce the leading 2 tab into 1 for the command in each rule, let target 'all/build' depends on phony target rather than real target. Make would otherwise omit some rule if the target of that rule is over there even if the target is is older than its dependents
------------------------------------------------------------------------
r427 | syang | 2006-03-21 02:51:46 +0900 (火, 21  3月 2006) | 1 line

reduce the leading 2 tab into 1 for the command in each rule, let target 'all/build' depends on phony target rather than real target. Make would otherwise omit some rule if the target of that rule is over there even if the target is is older than its dependents
------------------------------------------------------------------------
r426 | syang | 2006-03-21 02:45:13 +0900 (火, 21  3月 2006) | 1 line

enable IPA
------------------------------------------------------------------------
r389 | lin | 2006-03-14 13:45:55 +0900 (火, 14  3月 2006) | 1 line

Increase the size of array size_lookup[] to avoid boundary overflow in init_ggc() on native compiler.
------------------------------------------------------------------------
r348 | syang | 2006-03-05 05:00:06 +0900 (日, 05  3月 2006) | 1 line

REAL_VALUE_TO_TARGET_DOUBLE save target-bit-pattern into a array of long-typed data. each array element hold only 32 bit of target-bit-pattern even if the long is wider than 32bits. On 64bit (build) form, we need to convert the array into compact form.  REAL_VALUE_TO_TARGET_LONG_DOUBLE has the same problem, however, we will fix this problem later
------------------------------------------------------------------------
r322 | syang | 2006-03-03 15:26:32 +0900 (金, 03  3月 2006) | 1 line

replace INT with int and INTPTR with long since we can access the 2 types in this file
------------------------------------------------------------------------
r321 | lin | 2006-03-01 07:30:11 +0900 (水, 01  3月 2006) | 1 line

add support for gcc-3.2.3 native build: type-cast to suppress print format warning
------------------------------------------------------------------------
r320 | lin | 2006-03-01 03:49:35 +0900 (水, 01  3月 2006) | 1 line

gcc 3.2.3 complains on long long unsigned in format, so type-cast __uint64_t to UINT64
------------------------------------------------------------------------
r319 | syang | 2006-02-26 04:58:28 +0900 (日, 26  2月 2006) | 1 line

fix typo, the driver should come from driver/ rather than driver.nue/
------------------------------------------------------------------------
r318 | syang | 2006-02-26 04:39:37 +0900 (日, 26  2月 2006) | 1 line

the field of memroy in structure RESOURCE is used to keep track of memory usage. In the process of keeping track of mem usage, <memory> is sometimes used to hold the value of pointer, e.g value return from sbrk(), therefore, <memory> should be 64bits on ia64 platform
------------------------------------------------------------------------
r317 | syang | 2006-02-26 03:48:46 +0900 (日, 26  2月 2006) | 1 line

gcc 3.4.x picky at type-casting from int to pointer or reverse, we should bridge the type casting with INTPTR -- the integer with the same size of pointer
------------------------------------------------------------------------
r316 | syang | 2006-02-26 03:44:23 +0900 (日, 26  2月 2006) | 1 line

on ia64 native environment, we directly call gcc/g++ for assembling and linking for C and C++ source. we still directly use ld to link fortran objects
------------------------------------------------------------------------
r315 | syang | 2006-02-26 03:39:05 +0900 (日, 26  2月 2006) | 1 line

take into account the ia64 native-build issues
------------------------------------------------------------------------
r314 | syang | 2006-02-26 03:36:39 +0900 (日, 26  2月 2006) | 1 line

on ia64 SIZEOF_LONG should be 8 bytes
------------------------------------------------------------------------
r313 | syang | 2006-02-26 03:35:36 +0900 (日, 26  2月 2006) | 1 line

if we build this file with gcc 3.4.x and if we erase all elements by going through the map with a iterator and then erasing current element which the iterator points to, we will fall into a infinite loop. the clear() function does not have such problem and it serve the same purpose
------------------------------------------------------------------------
r312 | syang | 2006-02-26 03:22:07 +0900 (日, 26  2月 2006) | 1 line

init version of native build component
------------------------------------------------------------------------
r311 | syang | 2006-02-26 03:15:17 +0900 (日, 26  2月 2006) | 1 line

native build component
------------------------------------------------------------------------
r310 | syang | 2006-02-23 05:12:01 +0900 (木, 23  2月 2006) | 1 line

gcc 3.4.x is picky at long-long constant without LL postfix, therefore we add LL postifx to suppress the comlains
------------------------------------------------------------------------
r275 | syang | 2006-01-26 04:49:51 +0900 (木, 26  1月 2006) | 1 line

use U8I4CVT for the conversion from I4 to U8
------------------------------------------------------------------------
r274 | syang | 2006-01-26 04:48:57 +0900 (木, 26  1月 2006) | 1 line

print the name of symbol associated with the CODEREP
------------------------------------------------------------------------
r255 | syang | 2006-01-21 05:40:27 +0900 (土, 21  1月 2006) | 1 line

perform typed alias analysis by default
------------------------------------------------------------------------
r254 | syang | 2006-01-21 05:38:21 +0900 (土, 21  1月 2006) | 1 line

enable gp-relative optimization
------------------------------------------------------------------------
r253 | syang | 2006-01-21 05:32:15 +0900 (土, 21  1月 2006) | 1 line

improve the display effect: narrow the gap, increase the font size etc
------------------------------------------------------------------------
r252 | syang | 2006-01-21 05:30:52 +0900 (土, 21  1月 2006) | 1 line

let Add_Sum() be capable handling U8I4CVT
------------------------------------------------------------------------
r251 | syang | 2006-01-21 05:27:03 +0900 (土, 21  1月 2006) | 1 line

render flags.c debuggable
------------------------------------------------------------------------
r250 | syang | 2006-01-21 05:25:53 +0900 (土, 21  1月 2006) | 1 line

global optimizer is not a good place for loop unrolling, so turn it off
------------------------------------------------------------------------
r247 | syang | 2006-01-16 01:21:14 +0900 (月, 16  1月 2006) | 1 line

source targeting for ia64
------------------------------------------------------------------------
r246 | syang | 2006-01-16 01:20:21 +0900 (月, 16  1月 2006) | 1 line

source targeting for ia64
------------------------------------------------------------------------
r218 | syang | 2006-01-10 11:51:42 +0900 (火, 10  1月 2006) | 1 line

prevent redefining macro
------------------------------------------------------------------------
r217 | syang | 2006-01-10 07:08:52 +0900 (火, 10  1月 2006) | 1 line

turn on case-clause make sense for IA64
------------------------------------------------------------------------
r216 | syang | 2006-01-10 07:05:29 +0900 (火, 10  1月 2006) | 1 line

most file in C++ FE come from gcc 3.3.1 release, however, method.c seems come from different release. So, i replace current method.c with that in gcc 3.3.1 release
------------------------------------------------------------------------
r215 | syang | 2006-01-10 06:47:11 +0900 (火, 10  1月 2006) | 1 line

suppress linking against -lgcc_s
------------------------------------------------------------------------
r214 | syang | 2006-01-10 06:46:08 +0900 (火, 10  1月 2006) | 1 line

enable the exception region
------------------------------------------------------------------------
r213 | syang | 2006-01-10 06:20:31 +0900 (火, 10  1月 2006) | 1 line

disable if-conv for REGION with IMPROPER type
------------------------------------------------------------------------
r212 | syang | 2006-01-06 01:52:06 +0900 (金, 06  1月 2006) | 1 line

the CG/ia64 guarantee the ordered comparison, therefore we can safely lower the LNOT to FALSEBR or TRUEBR
------------------------------------------------------------------------
r211 | syang | 2006-01-06 01:49:38 +0900 (金, 06  1月 2006) | 1 line

add the prototype for INTxx_{MAX,MIN}
------------------------------------------------------------------------
r210 | syang | 2006-01-06 01:49:21 +0900 (金, 06  1月 2006) | 1 line

add the prototype for INTxx_{MAX,MIN}
------------------------------------------------------------------------
r209 | syang | 2006-01-06 01:46:37 +0900 (金, 06  1月 2006) | 1 line

stdint.h is included somewhere without previous definition of __STDC_LIMIT_MACROS, therefore we can include this header file for the def for INTxx_MAX etc, change the INTxx_MAX for some constant to workaround this problem
------------------------------------------------------------------------
r208 | syang | 2006-01-06 01:42:37 +0900 (金, 06  1月 2006) | 1 line

remove a included header file
------------------------------------------------------------------------
r193 | syang | 2005-12-23 11:42:16 +0900 (金, 23 12月 2005) | 1 line


------------------------------------------------------------------------
r192 | syang | 2005-12-22 15:43:27 +0900 (木, 22 12月 2005) | 1 line

add definition to 2 boolean variables
------------------------------------------------------------------------
r191 | syang | 2005-12-22 15:42:04 +0900 (木, 22 12月 2005) | 1 line

set lazy-bind share-obj loading mode
------------------------------------------------------------------------
r190 | syang | 2005-12-22 15:40:35 +0900 (木, 22 12月 2005) | 1 line

specify rpath-link parameter
------------------------------------------------------------------------
r189 | syang | 2005-12-22 14:58:36 +0900 (木, 22 12月 2005) | 1 line

init version
------------------------------------------------------------------------
r188 | syang | 2005-12-22 14:57:54 +0900 (木, 22 12月 2005) | 1 line

remove inconsistent data
------------------------------------------------------------------------
r187 | syang | 2005-12-22 13:03:15 +0900 (木, 22 12月 2005) | 1 line

initial version
------------------------------------------------------------------------
r186 | syang | 2005-12-22 12:53:03 +0900 (木, 22 12月 2005) | 1 line


------------------------------------------------------------------------
r185 | syang | 2005-12-22 09:18:43 +0900 (木, 22 12月 2005) | 1 line

init version
------------------------------------------------------------------------
r184 | syang | 2005-12-22 09:12:57 +0900 (木, 22 12月 2005) | 1 line

init version
------------------------------------------------------------------------
r183 | syang | 2005-12-22 08:47:48 +0900 (木, 22 12月 2005) | 1 line

fix a typo
------------------------------------------------------------------------
r182 | syang | 2005-12-22 08:46:58 +0900 (木, 22 12月 2005) | 1 line

fix a typo
------------------------------------------------------------------------
r181 | syang | 2005-12-22 08:04:56 +0900 (木, 22 12月 2005) | 1 line

fix a incorrect path
------------------------------------------------------------------------
r180 | syang | 2005-12-22 07:52:03 +0900 (木, 22 12月 2005) | 1 line

enable ia64 support
------------------------------------------------------------------------
r179 | syang | 2005-12-22 06:34:00 +0900 (木, 22 12月 2005) | 1 line

source borrow from open64-1.0
------------------------------------------------------------------------
r178 | syang | 2005-12-22 06:21:10 +0900 (木, 22 12月 2005) | 1 line

We decide not use pathscale CG, use ORC CG alternatively, hence we remove the folder
------------------------------------------------------------------------
r177 | syang | 2005-12-22 06:14:16 +0900 (木, 22 12月 2005) | 1 line

enable ia64 support
------------------------------------------------------------------------
r176 | syang | 2005-12-22 05:38:24 +0900 (木, 22 12月 2005) | 1 line

initial version
------------------------------------------------------------------------
r175 | syang | 2005-12-22 05:36:53 +0900 (木, 22 12月 2005) | 1 line

initial version
------------------------------------------------------------------------
r174 | syang | 2005-12-22 05:34:31 +0900 (木, 22 12月 2005) | 1 line

no longer use INSTALL, delete it
------------------------------------------------------------------------
r171 | syang | 2005-12-22 04:02:09 +0900 (木, 22 12月 2005) | 1 line

add symbolic links to some header files to obviate the need of adding too much -I in the Makefile.gbases
------------------------------------------------------------------------
r136 | marcel | 2005-12-14 04:34:04 +0900 (水, 14 12月 2005) | 4 lines

Remove some Pro64 left-overs that we should not need, especially
since pathScale doesn't need it.


------------------------------------------------------------------------
r135 | marcel | 2005-12-13 11:32:56 +0900 (火, 13 12月 2005) | 3 lines

Import PathScale, version 2.2.1 (take 2).


------------------------------------------------------------------------
r94 | marcel | 2005-12-06 07:21:09 +0900 (火, 06 12月 2005) | 3 lines

Remove MIPS target files. They are not supposed to exist.


------------------------------------------------------------------------
r90 | marcel | 2005-12-01 08:31:37 +0900 (木, 01 12月 2005) | 3 lines

Branch off the PathScale 2.2.1 import.


------------------------------------------------------------------------
r89 | marcel | 2005-12-01 08:27:27 +0900 (木, 01 12月 2005) | 5 lines

Remove files not part of PathScale 2.2.1. Some probably weren't
even part of PathScale 1.3, but I forgot too clean that up before
importing 2.2.1.


------------------------------------------------------------------------
r88 | marcel | 2005-12-01 08:23:38 +0900 (木, 01 12月 2005) | 6 lines

kgnu_common was removed from PathScale 2.2.1
libelf and libiberty were moved a directory level up.
We previously kept libstc++ and libio, so we lost those
with this commit.


------------------------------------------------------------------------
r87 | marcel | 2005-12-01 08:15:47 +0900 (木, 01 12月 2005) | 3 lines

The GNU linker testsuite was removed from PathScale 1.3.


------------------------------------------------------------------------
r86 | marcel | 2005-12-01 07:30:23 +0900 (木, 01 12月 2005) | 3 lines

Import of PathScale, version 2.2.1


------------------------------------------------------------------------
r84 | marcel | 2005-11-30 10:08:30 +0900 (水, 30 11月 2005) | 5 lines

Assert PathScale copyright for changes made in version 1.0 for which
no copyright was asserted then, but for which copyright is asserted
now.


------------------------------------------------------------------------
r83 | marcel | 2005-11-30 09:38:37 +0900 (水, 30 11月 2005) | 3 lines

Import of PathScale version 1.3.


------------------------------------------------------------------------
r77 | marcel | 2005-11-19 11:32:40 +0900 (土, 19 11月 2005) | 16 lines

Remove files not part of PathScale 1.0. Files under the following
directories were kept:
	kpro64/common/com/ia64
	kpro64/init
	kpro64/kgnu_common/libio
	kpro64/kgnu_common/libstdc++
	kpro64/targia64
	kpro64/targcygnus_ia32_ia64
	kpro64/targia32_ia64_nodebug

The libio and libstdc++ directories under the kgnu_common directory
are kept out of conservatism. I'm not sure at this time they should
be nuked and since they're not in the way, I can defer removing them
until I do know. Though, they really shouldn't be there...


------------------------------------------------------------------------
r76 | marcel | 2005-11-19 09:19:33 +0900 (土, 19 11月 2005) | 10 lines

Post-import fixups of the original Pro64 bits to account for the following
directory renaming:

	.../osprey1.0	->		.../kpro64
		cygnus_20000828	->		cygnus
		gccfe		->		kgccfe
		g++fe		->		kg++fe
		gnu_common	->		kgnu_common


------------------------------------------------------------------------
r75 | marcel | 2005-11-19 09:14:26 +0900 (土, 19 11月 2005) | 4 lines

Post-import fixups of the PathScale bits to account for the renaming of
cygnus_20030612 to (just) cygnus.


------------------------------------------------------------------------
r71 | marcel | 2005-11-19 07:20:42 +0900 (土, 19 11月 2005) | 26 lines

Import of PathScale, version 1.0

The PathScale sources have been pre-molded in the following way:
1.  The CVS keywords have been normalized for this repository and do
    not generate any diffs. For filenames this means that they have
    osprey1.0 and not kpro64 as the first level directory even though
    the file lives under kpro64.
2.  The CVS Log keyword in kpro64/arith/edition.c has been removed
    and the delta caused by it due to Fred Chow's initial import has
    been reverted.
3.  The cygnus_20030612 directory has been renamed to cygnus. This
    to reduce diffs with the Pro64 compiler, which had cygnus_20000828
    and that got renamed to cygnus before importing. Future PathScale
    releases have renamed this directory to cygnus as well.

Diff-reduction has been applied in the following way:
1.  Source files that only contained copyright assertions but no other
    (non-whitespace) changes have been reverted. 

This commit does not remove files that are part of Pro64 but are not
part of PathScale 1.0. There are files we do not want to lose, so this
takes some additional effort. Also, no changes have been made yet to
account for the cygnus_20030612->cygnus name change. This will all be
resolved in follow-up commits.


------------------------------------------------------------------------
r68 | marcel | 2005-11-18 11:04:47 +0900 (金, 18 11月 2005) | 9 lines

Directory renaming to prepare for the import of version 1.0:
	cygnus_20000828 -> cygnus
	g++fe -> kg++fe
	gccfe -> kgccfe
	gnu_common -> kgnu_common

Remove obsolete gnu_common_19990929.


------------------------------------------------------------------------
r67 | marcel | 2005-11-18 10:48:50 +0900 (金, 18 11月 2005) | 3 lines

Rename osprey1.0 to kpro64 in preparation of importing version 1.0


------------------------------------------------------------------------
r66 | marcel | 2005-11-18 10:21:29 +0900 (金, 18 11月 2005) | 3 lines

Bootstrap the PathScale branch from the pro64 sources.


------------------------------------------------------------------------
r2 | marcel | 2005-10-25 10:22:06 +0900 (火, 25 10月 2005) | 8 lines

Import of SGI's Pro64 compiler suite, version 0.01.0 (package release 13).
Sources have been normalized in the following way:
1. Deleted osprey1.0/.census
2. Deleted osprey1.0/census,v
3. Removed $Log$ keyword from osprey1.0/arith/edition.c
4. Reset CVS keywords to a preset value 


------------------------------------------------------------------------
